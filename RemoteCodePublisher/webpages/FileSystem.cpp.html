<!DOCTYPE html>
<!------------------------------------------------------------------------
  FileSystem.cpp.html - Project 3 published file
  Published: Sun Apr  2 17:35:48 2017

  Ammar Salman, CSE687 - Object Oriented Design, Spring 2017
 ------------------------------------------------------------------------->
<html>
  <head>
     <link rel="stylesheet" type="text/css" href="resources/light.css"/>
     <script src="resources/scripts.js"></script>
     <button class="Fixed" onclick="toggleStyle(this)">Dark Theme</button>
  </head>
  <body>
   <h3>FileSystem.cpp</h3>
   <hr/>
   <div class = "indent">
     <h4>Dependencies:</h4>
     <div><a href="FileSystem.h.html">FileSystem.h</a></div>
   </div>
   <hr/>
<pre><span class="number">  1       </span><span class="comment">/////////////////////////////////////////////////////////////////////////////</span>
<span class="number">  2       </span><span class="comment">// FileSystem.cpp - Support file and directory operations                  //</span>
<span class="number">  3       </span><span class="comment">// ver 2.4                                                                 //</span>
<span class="number">  4       </span><span class="comment">// ----------------------------------------------------------------------- //</span>
<span class="number">  5       </span><span class="comment">// copyright © Jim Fawcett, 2012                                           //</span>
<span class="number">  6       </span><span class="comment">// All rights granted provided that this notice is retained                //</span>
<span class="number">  7       </span><span class="comment">// ----------------------------------------------------------------------- //</span>
<span class="number">  8       </span><span class="comment">// Language:    Visual C++, Visual Studio 2010                             //</span>
<span class="number">  9       </span><span class="comment">// Platform:    Dell XPS 8300, Core i7, Windows 7 SP1                      //</span>
<span class="number">  10      </span><span class="comment">// Application: Summer Projects, 2012                                      //</span>
<span class="number">  11      </span><span class="comment">// Author:      Jim Fawcett, CST 4-187, Syracuse University                //</span>
<span class="number">  12      </span><span class="comment">//              (315) 443-3948, jfawcett@twcny.rr.com                      //</span>
<span class="number">  13      </span><span class="comment">/////////////////////////////////////////////////////////////////////////////</span>
<span class="number">  14      </span>
<span class="number">  15      </span><span class="directive">#include</span> <span class="str">&ltiostream&gt</span>
<span class="number">  16      </span><span class="directive">#include</span> <span class="str">&ltsstream&gt</span>
<span class="number">  17      </span><span class="directive">#include</span> <span class="str">&ltiomanip&gt</span>
<span class="number">  18      </span><span class="directive">#include</span> <span class="str">&ltutility&gt</span>
<span class="number">  19      </span><span class="directive">#include</span> <span class="str">&ltcctype&gt</span>
<span class="number">  20      </span><span class="directive">#include</span> <span class="str">"FileSystem.h"</span>
<span class="number">  21      </span>
<span class="number">  22      </span><span class="key">using</span> <span class="key">namespace</span> FileSystem;
<span class="number">  23      </span>
<span class="number">  24      </span><span class="comment">/////////////////////////////////////////////////////////</span>
<span class="number">  25      </span><span class="comment">// helper FileSystemSearch</span>
<span class="number">  26      </span>
<span class="number">  27      </span><span class="key">class</span> FileSystemSearch
<span class="number">  28    </span><span class="minmax" onclick="toggleminmax(this, 'sp27')" onmouseover="highlight('sp27')" onmouseout="removeHighlight('sp27')">-</span><span id="sp27">{
<span class="number">  29      </span><span class="key">public</span>:
<span class="number">  30      </span>  FileSystemSearch();
<span class="number">  31      </span>  ~FileSystemSearch();
<span class="number">  32      </span>  std::string firstFile(const std::string& path=<span class="str">"."</span>, const std::string& pattern=<span class="str">"*.*"</span>);
<span class="number">  33      </span>  std::string nextFile();
<span class="number">  34      </span>  std::string firstDirectory(const std::string& path=<span class="str">"."</span>, const std::string& pattern=<span class="str">"*.*"</span>);
<span class="number">  35      </span>  std::string nextDirectory();
<span class="number">  36      </span>  <span class="key">void</span> close();
<span class="number">  37      </span><span class="key">private</span>:
<span class="number">  38      </span>  HANDLE hFindFile;
<span class="number">  39      </span>  WIN32_FIND_DATAA FindFileData;
<span class="number">  40      </span>  WIN32_FIND_DATAA* pFindFileData;
<span class="number">  41      </span>}</span>;
<span class="number">  42      </span>
<span class="number">  43    </span><span class="minmax" onclick="toggleminmax(this, 'sp42')" onmouseover="highlight('sp42')" onmouseout="removeHighlight('sp42')">-</span>FileSystemSearch::FileSystemSearch() : pFindFileData(&FindFileData) <span id="sp42">{}</span>
<span class="number">  44    </span><span class="minmax" onclick="toggleminmax(this, 'sp43')" onmouseover="highlight('sp43')" onmouseout="removeHighlight('sp43')">-</span>FileSystemSearch::~FileSystemSearch() <span id="sp43">{ ::FindClose(hFindFile); }</span>
<span class="number">  45    </span><span class="minmax" onclick="toggleminmax(this, 'sp44')" onmouseover="highlight('sp44')" onmouseout="removeHighlight('sp44')">-</span><span class="key">void</span> FileSystemSearch::close() <span id="sp44">{ ::FindClose(hFindFile); }</span>
<span class="number">  46      </span>
<span class="number">  47      </span><span class="comment">//----&lt block constructor taking array iterators &gt-------------------------</span>
<span class="number">  48      </span>
<span class="number">  49    </span><span class="minmax" onclick="toggleminmax(this, 'sp48')" onmouseover="highlight('sp48')" onmouseout="removeHighlight('sp48')">-</span>Block::Block(Byte* beg, Byte* end) : bytes_(beg, end) <span id="sp48">{}</span>
<span class="number">  50      </span>
<span class="number">  51      </span><span class="comment">//----&lt push back block byte &gt---------------------------------------------</span>
<span class="number">  52      </span>
<span class="number">  53      </span><span class="key">void</span> Block::push_back(Byte b)
<span class="number">  54    </span><span class="minmax" onclick="toggleminmax(this, 'sp53')" onmouseover="highlight('sp53')" onmouseout="removeHighlight('sp53')">-</span><span id="sp53">{
<span class="number">  55      </span>  bytes_.push_back(b);
<span class="number">  56      </span>}</span>
<span class="number">  57      </span><span class="comment">//----&lt non-const indexer &gt------------------------------------------------</span>
<span class="number">  58      </span>
<span class="number">  59      </span>Byte& Block::<span class="key">operator</span>[](size_t i)
<span class="number">  60    </span><span class="minmax" onclick="toggleminmax(this, 'sp59')" onmouseover="highlight('sp59')" onmouseout="removeHighlight('sp59')">-</span><span id="sp59">{
<span class="number">  61      </span>  <span class="key">if</span>(i&lt0 || bytes_.size() &lt= i)
<span class="number">  62      </span>    <span class="key">throw</span> std::runtime_error(<span class="str">"index out of range in Block"</span>);
<span class="number">  63      </span>  <span class="key">return</span> bytes_[i];
<span class="number">  64      </span>}</span>
<span class="number">  65      </span><span class="comment">//----&lt const indexer &gt----------------------------------------------------</span>
<span class="number">  66      </span>
<span class="number">  67      </span>Byte Block::<span class="key">operator</span>[](size_t i) const
<span class="number">  68    </span><span class="minmax" onclick="toggleminmax(this, 'sp67')" onmouseover="highlight('sp67')" onmouseout="removeHighlight('sp67')">-</span><span id="sp67">{
<span class="number">  69      </span>  <span class="key">if</span>(i&lt0 || bytes_.size() &lt= i)
<span class="number">  70      </span>    <span class="key">throw</span> std::runtime_error(<span class="str">"index out of range in Block"</span>);
<span class="number">  71      </span>  <span class="key">return</span> bytes_[i];
<span class="number">  72      </span>}</span>
<span class="number">  73      </span><span class="comment">//----&lt equality comparison &gt----------------------------------------------</span>
<span class="number">  74      </span>
<span class="number">  75      </span><span class="key">bool</span> Block::<span class="key">operator</span>==(const Block& block) const
<span class="number">  76    </span><span class="minmax" onclick="toggleminmax(this, 'sp75')" onmouseover="highlight('sp75')" onmouseout="removeHighlight('sp75')">-</span><span id="sp75">{
<span class="number">  77      </span>  <span class="key">return</span> bytes_ == block.bytes_;
<span class="number">  78      </span>}</span>
<span class="number">  79      </span><span class="comment">//----&lt inequality comparison &gt--------------------------------------------</span>
<span class="number">  80      </span>
<span class="number">  81      </span><span class="key">bool</span> Block::<span class="key">operator</span>!=(const Block& block) const
<span class="number">  82    </span><span class="minmax" onclick="toggleminmax(this, 'sp81')" onmouseover="highlight('sp81')" onmouseout="removeHighlight('sp81')">-</span><span id="sp81">{
<span class="number">  83      </span>  <span class="key">return</span> bytes_ != block.bytes_;
<span class="number">  84      </span>}</span>
<span class="number">  85      </span><span class="comment">//----&lt return number of bytes in block &gt----------------------------------</span>
<span class="number">  86      </span>
<span class="number">  87      </span>size_t Block::size() const
<span class="number">  88    </span><span class="minmax" onclick="toggleminmax(this, 'sp87')" onmouseover="highlight('sp87')" onmouseout="removeHighlight('sp87')">-</span><span id="sp87">{
<span class="number">  89      </span>  <span class="key">return</span> bytes_.size();
<span class="number">  90      </span>}</span>
<span class="number">  91      </span>
<span class="number">  92      </span><span class="comment">//----&lt File constructor opens file stream &gt-------------------------------</span>
<span class="number">  93      </span>
<span class="number">  94      </span>File::File(const std::string& filespec) 
<span class="number">  95      </span>    : name_(filespec), pIStream(nullptr), pOStream(nullptr), dirn_(in), typ_(text), good_(<span class="key">true</span>)
<span class="number">  96    </span><span class="minmax" onclick="toggleminmax(this, 'sp95')" onmouseover="highlight('sp95')" onmouseout="removeHighlight('sp95')">-</span><span id="sp95">{
<span class="number">  97      </span>}</span>
<span class="number">  98      </span><span class="comment">//----&lt File destructor closes file stream &gt-------------------------------</span>
<span class="number">  99      </span>
<span class="number">  100     </span>File::~File() 
<span class="number">  101   </span><span class="minmax" onclick="toggleminmax(this, 'sp100')" onmouseover="highlight('sp100')" onmouseout="removeHighlight('sp100')">-</span><span id="sp100">{ 
<span class="number">  102     </span>  <span class="key">if</span>(pIStream)
<span class="number">  103   </span><span class="minmax" onclick="toggleminmax(this, 'sp102')" onmouseover="highlight('sp102')" onmouseout="removeHighlight('sp102')">-</span>  <span id="sp102">{
<span class="number">  104     </span>    pIStream-&gtclose(); 
<span class="number">  105     </span>    <span class="key">delete</span> pIStream;
<span class="number">  106     </span>    pIStream = nullptr;
<span class="number">  107     </span>    good_ = <span class="key">false</span>;
<span class="number">  108     </span>  }</span>
<span class="number">  109     </span>  <span class="key">if</span>(pOStream)
<span class="number">  110   </span><span class="minmax" onclick="toggleminmax(this, 'sp109')" onmouseover="highlight('sp109')" onmouseout="removeHighlight('sp109')">-</span>  <span id="sp109">{
<span class="number">  111     </span>    pOStream-&gtclose();
<span class="number">  112     </span>    <span class="key">delete</span> pOStream; 
<span class="number">  113     </span>    pOStream = nullptr;
<span class="number">  114     </span>    good_ = <span class="key">false</span>;
<span class="number">  115     </span>  }</span>
<span class="number">  116     </span>}</span>
<span class="number">  117     </span><span class="comment">//----&lt open for reading or writing &gt--------------------------------------</span>
<span class="number">  118     </span>
<span class="number">  119     </span><span class="key">bool</span> File::open(direction dirn, type typ)
<span class="number">  120   </span><span class="minmax" onclick="toggleminmax(this, 'sp119')" onmouseover="highlight('sp119')" onmouseout="removeHighlight('sp119')">-</span><span id="sp119">{
<span class="number">  121     </span>  dirn_ = dirn;
<span class="number">  122     </span>  typ_ = typ;
<span class="number">  123     </span>  good_ = <span class="key">true</span>;
<span class="number">  124     </span>  <span class="key">if</span>(dirn == in)
<span class="number">  125   </span><span class="minmax" onclick="toggleminmax(this, 'sp124')" onmouseover="highlight('sp124')" onmouseout="removeHighlight('sp124')">-</span>  <span id="sp124">{
<span class="number">  126     </span>    pIStream = <span class="key">new</span> std::ifstream;
<span class="number">  127     </span>    <span class="key">if</span>(typ == binary)
<span class="number">  128     </span>      pIStream-&gtopen(name_.c_str(), std::ios::in | std::ios::binary);
<span class="number">  129     </span>    <span class="key">else</span>
<span class="number">  130     </span>      pIStream-&gtopen(name_.c_str(), std::ios::in);
<span class="number">  131     </span>    <span class="key">if</span> (!(*pIStream).good())
<span class="number">  132   </span><span class="minmax" onclick="toggleminmax(this, 'sp131')" onmouseover="highlight('sp131')" onmouseout="removeHighlight('sp131')">-</span>    <span id="sp131">{
<span class="number">  133     </span>      good_ = <span class="key">false</span>;
<span class="number">  134     </span>      pIStream = nullptr;
<span class="number">  135     </span>      <span class="comment">//throw std::runtime_error("\n  open for input failed in File constructor");</span>
<span class="number">  136     </span>    }</span>
<span class="number">  137     </span>  }</span>
<span class="number">  138     </span>  <span class="key">else</span>
<span class="number">  139   </span><span class="minmax" onclick="toggleminmax(this, 'sp138')" onmouseover="highlight('sp138')" onmouseout="removeHighlight('sp138')">-</span>  <span id="sp138">{
<span class="number">  140     </span>    pOStream = <span class="key">new</span> std::ofstream;
<span class="number">  141     </span>    <span class="key">if</span>(typ == binary)
<span class="number">  142     </span>      pOStream-&gtopen(name_.c_str(), std::ios::out | std::ios::binary);
<span class="number">  143     </span>    <span class="key">else</span>
<span class="number">  144     </span>      pOStream-&gtopen(name_.c_str(), std::ios::out);
<span class="number">  145     </span>    <span class="key">if</span> (!(*pOStream).good())
<span class="number">  146   </span><span class="minmax" onclick="toggleminmax(this, 'sp145')" onmouseover="highlight('sp145')" onmouseout="removeHighlight('sp145')">-</span>    <span id="sp145">{
<span class="number">  147     </span>      good_ = <span class="key">false</span>;
<span class="number">  148     </span>      pOStream = nullptr;
<span class="number">  149     </span>      <span class="comment">//throw std::runtime_error("\n  open for output failed in File constructor");</span>
<span class="number">  150     </span>    }</span>
<span class="number">  151     </span>  }</span>
<span class="number">  152     </span>  <span class="key">return</span> good_;
<span class="number">  153     </span>}</span>
<span class="number">  154     </span><span class="comment">//----&lt reads one line of a text file &gt------------------------------------</span>
<span class="number">  155     </span>
<span class="number">  156     </span>std::string File::getLine(<span class="key">bool</span> keepNewLines)
<span class="number">  157   </span><span class="minmax" onclick="toggleminmax(this, 'sp156')" onmouseover="highlight('sp156')" onmouseout="removeHighlight('sp156')">-</span><span id="sp156">{
<span class="number">  158     </span>  <span class="key">if</span>(pIStream == nullptr || !pIStream-&gtgood())
<span class="number">  159     </span>    <span class="key">throw</span> std::runtime_error(<span class="str">"input stream not open"</span>);
<span class="number">  160     </span>  <span class="key">if</span>(typ_ == binary)
<span class="number">  161     </span>    <span class="key">throw</span> std::runtime_error(<span class="str">"getting text line from binary file"</span>);
<span class="number">  162     </span>  <span class="key">if</span>(dirn_ == out)
<span class="number">  163     </span>    <span class="key">throw</span> std::runtime_error(<span class="str">"reading output file"</span>);
<span class="number">  164     </span>
<span class="number">  165     </span>  std::string store;
<span class="number">  166     </span>  <span class="key">while</span> (<span class="key">true</span>)
<span class="number">  167   </span><span class="minmax" onclick="toggleminmax(this, 'sp166')" onmouseover="highlight('sp166')" onmouseout="removeHighlight('sp166')">-</span>  <span id="sp166">{
<span class="number">  168     </span>    <span class="key">char</span> ch = pIStream-&gtget();
<span class="number">  169     </span>    <span class="key">if</span> (!isGood())
<span class="number">  170     </span>      <span class="key">return</span> store;
<span class="number">  171     </span>    <span class="key">if</span> (ch == <span class="str">'\n'</span>)
<span class="number">  172   </span><span class="minmax" onclick="toggleminmax(this, 'sp171')" onmouseover="highlight('sp171')" onmouseout="removeHighlight('sp171')">-</span>    <span id="sp171">{
<span class="number">  173     </span>      <span class="key">if</span> (keepNewLines)
<span class="number">  174     </span>        store += ch;
<span class="number">  175     </span>      <span class="key">return</span> store;
<span class="number">  176     </span>    }</span>
<span class="number">  177     </span>    store += ch;
<span class="number">  178     </span>  }</span>
<span class="number">  179     </span>}</span>
<span class="number">  180     </span><span class="comment">//----&lt read all lines of text file into one string &gt----------------------</span>
<span class="number">  181     </span>
<span class="number">  182     </span>std::string File::readAll(<span class="key">bool</span> keepNewLines)
<span class="number">  183   </span><span class="minmax" onclick="toggleminmax(this, 'sp182')" onmouseover="highlight('sp182')" onmouseout="removeHighlight('sp182')">-</span><span id="sp182">{
<span class="number">  184     </span>  std::string store;
<span class="number">  185     </span>  <span class="key">while</span> (<span class="key">true</span>)
<span class="number">  186   </span><span class="minmax" onclick="toggleminmax(this, 'sp185')" onmouseover="highlight('sp185')" onmouseout="removeHighlight('sp185')">-</span>  <span id="sp185">{
<span class="number">  187     </span>    <span class="key">if</span> (!isGood())
<span class="number">  188     </span>      <span class="key">return</span> store;
<span class="number">  189     </span>    store += getLine(keepNewLines);
<span class="number">  190     </span>    <span class="key">if</span> (!std::isspace(store[store.size() - 1]))
<span class="number">  191     </span>      store += <span class="str">' '</span>;
<span class="number">  192     </span>  }</span>
<span class="number">  193     </span>  <span class="key">return</span> store;
<span class="number">  194     </span>}</span>
<span class="number">  195     </span><span class="comment">//----&lt writes one line of a text to a file &gt------------------------------</span>
<span class="number">  196     </span>
<span class="number">  197     </span><span class="key">void</span> File::putLine(const std::string& s, <span class="key">bool</span> wantReturn)
<span class="number">  198   </span><span class="minmax" onclick="toggleminmax(this, 'sp197')" onmouseover="highlight('sp197')" onmouseout="removeHighlight('sp197')">-</span><span id="sp197">{
<span class="number">  199     </span>  <span class="key">if</span>(pOStream == nullptr || !pOStream-&gtgood())
<span class="number">  200     </span>    <span class="key">throw</span> std::runtime_error(<span class="str">"output stream not open"</span>);
<span class="number">  201     </span>  <span class="key">if</span>(typ_ == binary)
<span class="number">  202     </span>    <span class="key">throw</span> std::runtime_error(<span class="str">"writing text line to binary file"</span>);
<span class="number">  203     </span>  <span class="key">if</span>(dirn_ == in)
<span class="number">  204     </span>    <span class="key">throw</span> std::runtime_error(<span class="str">"writing input file"</span>);
<span class="number">  205     </span>  <span class="key">for</span>(size_t i=0; i&lts.size(); ++i)
<span class="number">  206     </span>    pOStream-&gtput(s[i]);
<span class="number">  207     </span>  <span class="key">if</span>(wantReturn)
<span class="number">  208     </span>    pOStream-&gtput(<span class="str">'\n'</span>);
<span class="number">  209     </span>  pOStream-&gtflush();
<span class="number">  210     </span>}</span>
<span class="number">  211     </span><span class="comment">//----&lt reads a block of bytes from binary file &gt--------------------------</span>
<span class="number">  212     </span>
<span class="number">  213     </span>Block File::getBlock(size_t size)
<span class="number">  214   </span><span class="minmax" onclick="toggleminmax(this, 'sp213')" onmouseover="highlight('sp213')" onmouseout="removeHighlight('sp213')">-</span><span id="sp213">{
<span class="number">  215     </span>  <span class="key">if</span>(pIStream == nullptr || !pIStream-&gtgood())
<span class="number">  216     </span>    <span class="key">throw</span> std::runtime_error(<span class="str">"input stream not open"</span>);
<span class="number">  217     </span>  <span class="key">if</span>(typ_ != binary)
<span class="number">  218     </span>    <span class="key">throw</span> std::runtime_error(<span class="str">"reading binary from text file"</span>);
<span class="number">  219     </span>  <span class="key">if</span>(dirn_ == out)
<span class="number">  220     </span>    <span class="key">throw</span> std::runtime_error(<span class="str">"reading output file"</span>);
<span class="number">  221     </span>  Block blk;
<span class="number">  222     </span>  <span class="key">if</span>(pIStream)
<span class="number">  223   </span><span class="minmax" onclick="toggleminmax(this, 'sp222')" onmouseover="highlight('sp222')" onmouseout="removeHighlight('sp222')">-</span>  <span id="sp222">{
<span class="number">  224     </span>    <span class="key">for</span>(size_t i=0; i&ltsize; ++i)
<span class="number">  225   </span><span class="minmax" onclick="toggleminmax(this, 'sp224')" onmouseover="highlight('sp224')" onmouseout="removeHighlight('sp224')">-</span>    <span id="sp224">{
<span class="number">  226     </span>      Byte b;
<span class="number">  227     </span>      pIStream-&gtget(b);
<span class="number">  228     </span>      <span class="key">if</span>(pIStream-&gtgood())
<span class="number">  229     </span>        blk.push_back(b);
<span class="number">  230     </span>      <span class="key">else</span>
<span class="number">  231     </span>        <span class="key">break</span>;
<span class="number">  232     </span>    }</span>
<span class="number">  233     </span>  }</span>
<span class="number">  234     </span>  <span class="key">return</span> blk;
<span class="number">  235     </span>}</span>
<span class="number">  236     </span><span class="comment">//----&lt writes a block of bytes to binary file &gt---------------------------</span>
<span class="number">  237     </span>
<span class="number">  238     </span><span class="key">void</span> File::putBlock(const Block& blk)
<span class="number">  239   </span><span class="minmax" onclick="toggleminmax(this, 'sp238')" onmouseover="highlight('sp238')" onmouseout="removeHighlight('sp238')">-</span><span id="sp238">{
<span class="number">  240     </span>  <span class="key">if</span>(pOStream == nullptr || !pOStream-&gtgood())
<span class="number">  241     </span>    <span class="key">throw</span> std::runtime_error(<span class="str">"output stream not open"</span>);
<span class="number">  242     </span>  <span class="key">if</span>(typ_ != binary)
<span class="number">  243     </span>    <span class="key">throw</span> std::runtime_error(<span class="str">"writing binary to text file"</span>);
<span class="number">  244     </span>  <span class="key">if</span>(dirn_ == in)
<span class="number">  245     </span>    <span class="key">throw</span> std::runtime_error(<span class="str">"writing input file"</span>);
<span class="number">  246     </span>  <span class="key">if</span>(!pOStream-&gtgood())
<span class="number">  247     </span>    <span class="key">return</span>;
<span class="number">  248     </span>  <span class="key">for</span>(size_t i=0; i&ltblk.size(); ++i)
<span class="number">  249   </span><span class="minmax" onclick="toggleminmax(this, 'sp248')" onmouseover="highlight('sp248')" onmouseout="removeHighlight('sp248')">-</span>  <span id="sp248">{
<span class="number">  250     </span>    pOStream-&gtput(blk[i]);
<span class="number">  251     </span>  }</span>
<span class="number">  252     </span>}</span>
<span class="number">  253     </span><span class="comment">//----&lt tests for error free stream state &gt--------------------------------</span>
<span class="number">  254     </span>
<span class="number">  255     </span><span class="key">bool</span> File::isGood()
<span class="number">  256   </span><span class="minmax" onclick="toggleminmax(this, 'sp255')" onmouseover="highlight('sp255')" onmouseout="removeHighlight('sp255')">-</span><span id="sp255">{
<span class="number">  257     </span>  <span class="key">if</span>(!good_)
<span class="number">  258     </span>    <span class="key">return</span> <span class="key">false</span>;
<span class="number">  259     </span>  <span class="key">if</span>(pIStream != nullptr)
<span class="number">  260     </span>    <span class="key">return</span> (good_ = pIStream-&gtgood());
<span class="number">  261     </span>  <span class="key">if</span>(pOStream != nullptr)
<span class="number">  262     </span>    <span class="key">return</span> (good_ = pOStream-&gtgood());
<span class="number">  263     </span>  <span class="key">return</span> (good_ = <span class="key">false</span>);
<span class="number">  264     </span>}</span>
<span class="number">  265     </span><span class="comment">//----&lt flushes output stream to its file &gt--------------------------------</span>
<span class="number">  266     </span>
<span class="number">  267     </span><span class="key">void</span> File::flush()
<span class="number">  268   </span><span class="minmax" onclick="toggleminmax(this, 'sp267')" onmouseover="highlight('sp267')" onmouseout="removeHighlight('sp267')">-</span><span id="sp267">{
<span class="number">  269     </span>  <span class="key">if</span>(pOStream != nullptr && pOStream-&gtgood())
<span class="number">  270     </span>    pOStream-&gtflush();
<span class="number">  271     </span>}</span>
<span class="number">  272     </span><span class="comment">//----&lt clears error state enabling operations again &gt---------------------</span>
<span class="number">  273     </span>
<span class="number">  274     </span><span class="key">void</span> File::clear()
<span class="number">  275   </span><span class="minmax" onclick="toggleminmax(this, 'sp274')" onmouseover="highlight('sp274')" onmouseout="removeHighlight('sp274')">-</span><span id="sp274">{
<span class="number">  276     </span>  <span class="key">if</span>(pIStream != nullptr)
<span class="number">  277     </span>    pIStream-&gtclear();
<span class="number">  278     </span>  <span class="key">if</span>(pOStream != nullptr)
<span class="number">  279     </span>    pOStream-&gtclear();
<span class="number">  280     </span>}</span>
<span class="number">  281     </span><span class="comment">//----&lt close file handle &gt------------------------------------------------</span>
<span class="number">  282     </span>
<span class="number">  283     </span><span class="key">void</span> File::close()
<span class="number">  284   </span><span class="minmax" onclick="toggleminmax(this, 'sp283')" onmouseover="highlight('sp283')" onmouseout="removeHighlight('sp283')">-</span><span id="sp283">{
<span class="number">  285     </span>  File::flush();
<span class="number">  286     </span>  <span class="key">if</span> (pIStream != nullptr)
<span class="number">  287   </span><span class="minmax" onclick="toggleminmax(this, 'sp286')" onmouseover="highlight('sp286')" onmouseout="removeHighlight('sp286')">-</span>  <span id="sp286">{
<span class="number">  288     </span>    pIStream-&gtclose();
<span class="number">  289     </span>    pIStream = nullptr;
<span class="number">  290     </span>    good_ = <span class="key">false</span>;
<span class="number">  291     </span>  }</span>
<span class="number">  292     </span>  <span class="key">if</span> (pOStream)
<span class="number">  293   </span><span class="minmax" onclick="toggleminmax(this, 'sp292')" onmouseover="highlight('sp292')" onmouseout="removeHighlight('sp292')">-</span>  <span id="sp292">{
<span class="number">  294     </span>    pOStream-&gtclose();
<span class="number">  295     </span>    pOStream = nullptr;
<span class="number">  296     </span>    good_ = <span class="key">false</span>;
<span class="number">  297     </span>  }</span>
<span class="number">  298     </span>}</span>
<span class="number">  299     </span><span class="comment">//----&lt file exists &gt--------------------------------------------------</span>
<span class="number">  300     </span>
<span class="number">  301     </span><span class="key">bool</span> File::exists(const std::string& file)
<span class="number">  302   </span><span class="minmax" onclick="toggleminmax(this, 'sp301')" onmouseover="highlight('sp301')" onmouseout="removeHighlight('sp301')">-</span><span id="sp301">{
<span class="number">  303     </span>  <span class="key">return</span> ::GetFileAttributesA(file.c_str()) != INVALID_FILE_ATTRIBUTES;
<span class="number">  304     </span>}</span>
<span class="number">  305     </span><span class="comment">//----&lt copy file &gt----------------------------------------------------</span>
<span class="number">  306     </span>
<span class="number">  307     </span><span class="key">bool</span> File::copy(const std::string& src, const std::string& dst, <span class="key">bool</span> failIfExists)
<span class="number">  308   </span><span class="minmax" onclick="toggleminmax(this, 'sp307')" onmouseover="highlight('sp307')" onmouseout="removeHighlight('sp307')">-</span><span id="sp307">{
<span class="number">  309     </span>  <span class="key">return</span> ::CopyFileA(src.c_str(), dst.c_str(), failIfExists) != 0;
<span class="number">  310     </span>}</span>
<span class="number">  311     </span><span class="comment">//----&lt remove file &gt--------------------------------------------------</span>
<span class="number">  312     </span>
<span class="number">  313     </span><span class="key">bool</span> File::remove(const std::string& file)
<span class="number">  314   </span><span class="minmax" onclick="toggleminmax(this, 'sp313')" onmouseover="highlight('sp313')" onmouseout="removeHighlight('sp313')">-</span><span id="sp313">{
<span class="number">  315     </span>  <span class="key">return</span> ::DeleteFileA(file.c_str()) != 0;
<span class="number">  316     </span>}</span>
<span class="number">  317     </span><span class="comment">//----&lt constructor &gt--------------------------------------------------</span>
<span class="number">  318     </span>
<span class="number">  319     </span>FileInfo::FileInfo(const std::string& fileSpec)
<span class="number">  320   </span><span class="minmax" onclick="toggleminmax(this, 'sp319')" onmouseover="highlight('sp319')" onmouseout="removeHighlight('sp319')">-</span><span id="sp319">{
<span class="number">  321     </span>  HANDLE hFile = ::FindFirstFileA(fileSpec.c_str(), &data);
<span class="number">  322     </span>  <span class="key">if</span>(hFile == INVALID_HANDLE_VALUE)
<span class="number">  323     </span>    good_ = <span class="key">false</span>;
<span class="number">  324     </span>  <span class="key">else</span>
<span class="number">  325     </span>    good_ = <span class="key">true</span>;
<span class="number">  326     </span>}</span>
<span class="number">  327     </span><span class="comment">//----&lt is passed filespec valid? &gt------------------------------------</span>
<span class="number">  328     </span>
<span class="number">  329     </span><span class="key">bool</span> FileInfo::good()
<span class="number">  330   </span><span class="minmax" onclick="toggleminmax(this, 'sp329')" onmouseover="highlight('sp329')" onmouseout="removeHighlight('sp329')">-</span><span id="sp329">{
<span class="number">  331     </span>  <span class="key">return</span> good_;
<span class="number">  332     </span>}</span>
<span class="number">  333     </span><span class="comment">//----&lt return file name &gt---------------------------------------------</span>
<span class="number">  334     </span>
<span class="number">  335     </span>std::string FileInfo::name() const
<span class="number">  336   </span><span class="minmax" onclick="toggleminmax(this, 'sp335')" onmouseover="highlight('sp335')" onmouseout="removeHighlight('sp335')">-</span><span id="sp335">{
<span class="number">  337     </span>  <span class="key">return</span> Path::getName(data.cFileName);
<span class="number">  338     </span>}</span>
<span class="number">  339     </span><span class="comment">//----&lt conversion helper &gt--------------------------------------------</span>
<span class="number">  340     </span>
<span class="number">  341     </span>std::string FileInfo::intToString(<span class="key">long</span> i)
<span class="number">  342   </span><span class="minmax" onclick="toggleminmax(this, 'sp341')" onmouseover="highlight('sp341')" onmouseout="removeHighlight('sp341')">-</span><span id="sp341">{
<span class="number">  343     </span>  std::ostringstream out;
<span class="number">  344     </span>  out.fill(<span class="str">'0'</span>);
<span class="number">  345     </span>  out &lt&lt std::setw(2) &lt&lt i;
<span class="number">  346     </span>  <span class="key">return</span> out.str();
<span class="number">  347     </span>}</span>
<span class="number">  348     </span><span class="comment">//----&lt return file date &gt---------------------------------------------</span>
<span class="number">  349     </span>
<span class="number">  350     </span>std::string FileInfo::date(dateFormat df) const
<span class="number">  351   </span><span class="minmax" onclick="toggleminmax(this, 'sp350')" onmouseover="highlight('sp350')" onmouseout="removeHighlight('sp350')">-</span><span id="sp350">{
<span class="number">  352     </span>  std::string dateStr, timeStr;
<span class="number">  353     </span>  FILETIME ft;
<span class="number">  354     </span>  SYSTEMTIME st;
<span class="number">  355     </span>  ::FileTimeToLocalFileTime(&data.ftLastWriteTime, &ft);
<span class="number">  356     </span>  ::FileTimeToSystemTime(&ft, &st);
<span class="number">  357     </span>  dateStr = intToString(st.wMonth) + <span class="str">'/'</span> + intToString(st.wDay) + <span class="str">'/'</span> + intToString(st.wYear);
<span class="number">  358     </span>  timeStr = intToString(st.wHour) + <span class="str">':'</span> + intToString(st.wMinute) + <span class="str">':'</span> + intToString(st.wSecond);
<span class="number">  359     </span>  <span class="key">if</span>(df == dateformat)
<span class="number">  360     </span>    <span class="key">return</span> dateStr;
<span class="number">  361     </span>  <span class="key">if</span>(df == timeformat)
<span class="number">  362     </span>    <span class="key">return</span> timeStr;
<span class="number">  363     </span>  <span class="key">return</span> dateStr + <span class="str">" "</span> + timeStr;
<span class="number">  364     </span>}</span>
<span class="number">  365     </span><span class="comment">//----&lt return file size &gt---------------------------------------------</span>
<span class="number">  366     </span>
<span class="number">  367     </span>size_t FileInfo::size() const
<span class="number">  368   </span><span class="minmax" onclick="toggleminmax(this, 'sp367')" onmouseover="highlight('sp367')" onmouseout="removeHighlight('sp367')">-</span><span id="sp367">{
<span class="number">  369     </span>  <span class="key">return</span> (size_t)(data.nFileSizeLow + (data.nFileSizeHigh &lt&lt 8));
<span class="number">  370     </span>}</span>
<span class="number">  371     </span><span class="comment">//----&lt is type archive? &gt---------------------------------------------</span>
<span class="number">  372     </span>
<span class="number">  373     </span><span class="key">bool</span> FileInfo::isArchive() const
<span class="number">  374   </span><span class="minmax" onclick="toggleminmax(this, 'sp373')" onmouseover="highlight('sp373')" onmouseout="removeHighlight('sp373')">-</span><span id="sp373">{
<span class="number">  375     </span>  <span class="key">return</span> (data.dwFileAttributes & FILE_ATTRIBUTE_ARCHIVE) != 0;
<span class="number">  376     </span>}</span>
<span class="number">  377     </span><span class="comment">//----&lt is type compressed? &gt------------------------------------------</span>
<span class="number">  378     </span>
<span class="number">  379     </span><span class="key">bool</span> FileInfo::isCompressed() const
<span class="number">  380   </span><span class="minmax" onclick="toggleminmax(this, 'sp379')" onmouseover="highlight('sp379')" onmouseout="removeHighlight('sp379')">-</span><span id="sp379">{
<span class="number">  381     </span>  <span class="key">return</span> (data.dwFileAttributes & FILE_ATTRIBUTE_COMPRESSED) != 0;
<span class="number">  382     </span>}</span>
<span class="number">  383     </span><span class="comment">//----&lt is type directory? &gt-------------------------------------------</span>
<span class="number">  384     </span>
<span class="number">  385     </span><span class="key">bool</span> FileInfo::isDirectory() const
<span class="number">  386   </span><span class="minmax" onclick="toggleminmax(this, 'sp385')" onmouseover="highlight('sp385')" onmouseout="removeHighlight('sp385')">-</span><span id="sp385">{
<span class="number">  387     </span>  <span class="key">return</span> (data.dwFileAttributes & FILE_ATTRIBUTE_DIRECTORY) != 0;
<span class="number">  388     </span>}</span>
<span class="number">  389     </span><span class="comment">//----&lt is type encrypted? &gt---------------------------------------------</span>
<span class="number">  390     </span>
<span class="number">  391     </span><span class="key">bool</span> FileInfo::isEncrypted() const
<span class="number">  392   </span><span class="minmax" onclick="toggleminmax(this, 'sp391')" onmouseover="highlight('sp391')" onmouseout="removeHighlight('sp391')">-</span><span id="sp391">{
<span class="number">  393     </span>  <span class="key">return</span> (data.dwFileAttributes & FILE_ATTRIBUTE_ENCRYPTED) != 0;
<span class="number">  394     </span>}</span>
<span class="number">  395     </span><span class="comment">//----&lt is type hiddent? &gt---------------------------------------------</span>
<span class="number">  396     </span>
<span class="number">  397     </span><span class="key">bool</span> FileInfo::isHidden() const
<span class="number">  398   </span><span class="minmax" onclick="toggleminmax(this, 'sp397')" onmouseover="highlight('sp397')" onmouseout="removeHighlight('sp397')">-</span><span id="sp397">{
<span class="number">  399     </span>  <span class="key">return</span> (data.dwFileAttributes & FILE_ATTRIBUTE_HIDDEN) != 0;
<span class="number">  400     </span>}</span>
<span class="number">  401     </span><span class="comment">//----&lt is type normal? &gt---------------------------------------------</span>
<span class="number">  402     </span>
<span class="number">  403     </span><span class="key">bool</span> FileInfo::isNormal() const
<span class="number">  404   </span><span class="minmax" onclick="toggleminmax(this, 'sp403')" onmouseover="highlight('sp403')" onmouseout="removeHighlight('sp403')">-</span><span id="sp403">{
<span class="number">  405     </span>  <span class="key">return</span> (data.dwFileAttributes & FILE_ATTRIBUTE_NORMAL) != 0;
<span class="number">  406     </span>}</span>
<span class="number">  407     </span><span class="comment">//----&lt is type offline? &gt---------------------------------------------</span>
<span class="number">  408     </span>
<span class="number">  409     </span><span class="key">bool</span> FileInfo::isOffLine() const
<span class="number">  410   </span><span class="minmax" onclick="toggleminmax(this, 'sp409')" onmouseover="highlight('sp409')" onmouseout="removeHighlight('sp409')">-</span><span id="sp409">{
<span class="number">  411     </span>  <span class="key">return</span> (data.dwFileAttributes & FILE_ATTRIBUTE_OFFLINE) != 0;
<span class="number">  412     </span>}</span>
<span class="number">  413     </span><span class="comment">//----&lt is type readonly? &gt--------------------------------------------</span>
<span class="number">  414     </span>
<span class="number">  415     </span><span class="key">bool</span> FileInfo::isReadOnly() const
<span class="number">  416   </span><span class="minmax" onclick="toggleminmax(this, 'sp415')" onmouseover="highlight('sp415')" onmouseout="removeHighlight('sp415')">-</span><span id="sp415">{
<span class="number">  417     </span>  <span class="key">return</span> (data.dwFileAttributes & FILE_ATTRIBUTE_READONLY) != 0;
<span class="number">  418     </span>}</span>
<span class="number">  419     </span><span class="comment">//----&lt is type system? &gt----------------------------------------------</span>
<span class="number">  420     </span>
<span class="number">  421     </span><span class="key">bool</span> FileInfo::isSystem() const
<span class="number">  422   </span><span class="minmax" onclick="toggleminmax(this, 'sp421')" onmouseover="highlight('sp421')" onmouseout="removeHighlight('sp421')">-</span><span id="sp421">{
<span class="number">  423     </span>  <span class="key">return</span> (data.dwFileAttributes & FILE_ATTRIBUTE_SYSTEM  ) != 0;
<span class="number">  424     </span>}</span>
<span class="number">  425     </span><span class="comment">//----&lt is type temporary? &gt-------------------------------------------</span>
<span class="number">  426     </span>
<span class="number">  427     </span><span class="key">bool</span> FileInfo::isTemporary() const
<span class="number">  428   </span><span class="minmax" onclick="toggleminmax(this, 'sp427')" onmouseover="highlight('sp427')" onmouseout="removeHighlight('sp427')">-</span><span id="sp427">{
<span class="number">  429     </span>  <span class="key">return</span> (data.dwFileAttributes & FILE_ATTRIBUTE_TEMPORARY) != 0;
<span class="number">  430     </span>}</span>
<span class="number">  431     </span><span class="comment">//----&lt compare names alphabetically &gt---------------------------------</span>
<span class="number">  432     </span>
<span class="number">  433     </span><span class="key">bool</span> FileInfo::<span class="key">operator</span>&lt(const FileInfo& fi) const
<span class="number">  434   </span><span class="minmax" onclick="toggleminmax(this, 'sp433')" onmouseover="highlight('sp433')" onmouseout="removeHighlight('sp433')">-</span><span id="sp433">{
<span class="number">  435     </span>  <span class="key">return</span> strcmp(data.cFileName, fi.data.cFileName) == -1;
<span class="number">  436     </span>}</span>
<span class="number">  437     </span><span class="comment">//----&lt compare names alphabetically &gt---------------------------------</span>
<span class="number">  438     </span>
<span class="number">  439     </span><span class="key">bool</span> FileInfo::<span class="key">operator</span>==(const FileInfo& fi) const
<span class="number">  440   </span><span class="minmax" onclick="toggleminmax(this, 'sp439')" onmouseover="highlight('sp439')" onmouseout="removeHighlight('sp439')">-</span><span id="sp439">{
<span class="number">  441     </span>  <span class="key">return</span> strcmp(data.cFileName, fi.data.cFileName) == 0;
<span class="number">  442     </span>}</span>
<span class="number">  443     </span><span class="comment">//----&lt compare names alphabetically &gt---------------------------------</span>
<span class="number">  444     </span>
<span class="number">  445     </span><span class="key">bool</span> FileInfo::<span class="key">operator</span>&gt(const FileInfo& fi) const
<span class="number">  446   </span><span class="minmax" onclick="toggleminmax(this, 'sp445')" onmouseover="highlight('sp445')" onmouseout="removeHighlight('sp445')">-</span><span id="sp445">{
<span class="number">  447     </span>  <span class="key">return</span> strcmp(data.cFileName, fi.data.cFileName) == 1;
<span class="number">  448     </span>}</span>
<span class="number">  449     </span><span class="comment">//----&lt compare file times &gt-------------------------------------------</span>
<span class="number">  450     </span>
<span class="number">  451     </span><span class="key">bool</span> FileInfo::earlier(const FileInfo& fi) const
<span class="number">  452   </span><span class="minmax" onclick="toggleminmax(this, 'sp451')" onmouseover="highlight('sp451')" onmouseout="removeHighlight('sp451')">-</span><span id="sp451">{
<span class="number">  453     </span>  FILETIME ft1 = data.ftLastWriteTime;
<span class="number">  454     </span>  FILETIME ft2 = fi.data.ftLastWriteTime;
<span class="number">  455     </span>  <span class="key">return</span> ::CompareFileTime(&ft1, &ft2) == -1;
<span class="number">  456     </span>}</span>
<span class="number">  457     </span><span class="comment">//----&lt compare file times &gt-------------------------------------------</span>
<span class="number">  458     </span>
<span class="number">  459     </span><span class="key">bool</span> FileInfo::later(const FileInfo& fi) const
<span class="number">  460   </span><span class="minmax" onclick="toggleminmax(this, 'sp459')" onmouseover="highlight('sp459')" onmouseout="removeHighlight('sp459')">-</span><span id="sp459">{
<span class="number">  461     </span>  FILETIME ft1 = data.ftLastWriteTime;
<span class="number">  462     </span>  FILETIME ft2 = fi.data.ftLastWriteTime;
<span class="number">  463     </span>  <span class="key">return</span> ::CompareFileTime(&ft1, &ft2) == 1;
<span class="number">  464     </span>}</span>
<span class="number">  465     </span><span class="comment">//----&lt smaller &gt------------------------------------------------------</span>
<span class="number">  466     </span>
<span class="number">  467     </span><span class="key">bool</span> FileInfo::smaller(const FileInfo &fi) const
<span class="number">  468   </span><span class="minmax" onclick="toggleminmax(this, 'sp467')" onmouseover="highlight('sp467')" onmouseout="removeHighlight('sp467')">-</span><span id="sp467">{
<span class="number">  469     </span>  <span class="key">return</span> size() &lt fi.size();
<span class="number">  470     </span>}</span>
<span class="number">  471     </span><span class="comment">//----&lt larger &gt-------------------------------------------------------</span>
<span class="number">  472     </span>
<span class="number">  473     </span><span class="key">bool</span> FileInfo::larger(const FileInfo &fi) const
<span class="number">  474   </span><span class="minmax" onclick="toggleminmax(this, 'sp473')" onmouseover="highlight('sp473')" onmouseout="removeHighlight('sp473')">-</span><span id="sp473">{
<span class="number">  475     </span>  <span class="key">return</span> size() &gt fi.size();
<span class="number">  476     </span>}</span>
<span class="number">  477     </span><span class="comment">//----&lt convert string to lower case chars &gt---------------------------</span>
<span class="number">  478     </span>
<span class="number">  479     </span>std::string Path::toLower(const std::string& src)
<span class="number">  480   </span><span class="minmax" onclick="toggleminmax(this, 'sp479')" onmouseover="highlight('sp479')" onmouseout="removeHighlight('sp479')">-</span><span id="sp479">{
<span class="number">  481     </span>  std::string temp;
<span class="number">  482     </span>  <span class="key">for</span>(size_t i=0; i&ltsrc.length(); ++i)
<span class="number">  483     </span>    temp += tolower(src[i]);
<span class="number">  484     </span>  <span class="key">return</span> temp;
<span class="number">  485     </span>}</span>
<span class="number">  486     </span><span class="comment">//----&lt convert string to upper case chars &gt---------------------------</span>
<span class="number">  487     </span>
<span class="number">  488     </span>  
<span class="number">  489     </span>std::string Path::toUpper(const std::string& src)
<span class="number">  490   </span><span class="minmax" onclick="toggleminmax(this, 'sp489')" onmouseover="highlight('sp489')" onmouseout="removeHighlight('sp489')">-</span><span id="sp489">{
<span class="number">  491     </span>  std::string temp;
<span class="number">  492     </span>  <span class="key">for</span>(size_t i=0; i&ltsrc.length(); ++i)
<span class="number">  493     </span>    temp += toupper(src[i]);
<span class="number">  494     </span>  <span class="key">return</span> temp;
<span class="number">  495     </span>}</span>
<span class="number">  496     </span><span class="comment">//----&lt get path from fileSpec &gt---------------------------------------</span>
<span class="number">  497     </span>
<span class="number">  498     </span>std::string Path::getName(const std::string &fileSpec, <span class="key">bool</span> withExt)
<span class="number">  499   </span><span class="minmax" onclick="toggleminmax(this, 'sp498')" onmouseover="highlight('sp498')" onmouseout="removeHighlight('sp498')">-</span><span id="sp498">{
<span class="number">  500     </span>  size_t pos = fileSpec.find_last_of(<span class="str">"/"</span>);
<span class="number">  501     </span>  <span class="key">if</span>(pos &gt= fileSpec.length())
<span class="number">  502   </span><span class="minmax" onclick="toggleminmax(this, 'sp501')" onmouseover="highlight('sp501')" onmouseout="removeHighlight('sp501')">-</span>  <span id="sp501">{
<span class="number">  503     </span>    pos = fileSpec.find_last_of(<span class="str">"\\"</span>);
<span class="number">  504     </span>    <span class="key">if</span>(pos &gt= fileSpec.length())
<span class="number">  505   </span><span class="minmax" onclick="toggleminmax(this, 'sp504')" onmouseover="highlight('sp504')" onmouseout="removeHighlight('sp504')">-</span>    <span id="sp504">{
<span class="number">  506     </span>      <span class="comment">// no path prepended</span>
<span class="number">  507     </span>      <span class="key">if</span>(withExt)
<span class="number">  508     </span>        <span class="key">return</span> fileSpec;
<span class="number">  509     </span>      <span class="key">else</span>
<span class="number">  510   </span><span class="minmax" onclick="toggleminmax(this, 'sp509')" onmouseover="highlight('sp509')" onmouseout="removeHighlight('sp509')">-</span>      <span id="sp509">{
<span class="number">  511     </span>        <span class="comment">// remove ext</span>
<span class="number">  512     </span>        size_t pos = fileSpec.find(<span class="str">"."</span>);
<span class="number">  513     </span>        <span class="key">if</span>(pos &gt fileSpec.size())
<span class="number">  514     </span>          <span class="key">return</span> fileSpec;
<span class="number">  515     </span>        <span class="key">return</span> fileSpec.substr(0, pos-1);
<span class="number">  516     </span>      }</span>
<span class="number">  517     </span>    }</span>
<span class="number">  518     </span>  }</span>
<span class="number">  519     </span>  <span class="key">if</span>(withExt)
<span class="number">  520     </span>    <span class="key">return</span> fileSpec.substr(pos+1,fileSpec.length()-pos);
<span class="number">  521     </span>  <span class="key">else</span>
<span class="number">  522   </span><span class="minmax" onclick="toggleminmax(this, 'sp521')" onmouseover="highlight('sp521')" onmouseout="removeHighlight('sp521')">-</span>  <span id="sp521">{
<span class="number">  523     </span>    <span class="comment">// remove ext</span>
<span class="number">  524     </span>    size_t pos2 = fileSpec.find(<span class="str">"."</span>, pos);
<span class="number">  525     </span>    <span class="key">if</span>(pos2 &gt fileSpec.size())
<span class="number">  526     </span>      <span class="comment">// no ext</span>
<span class="number">  527     </span>      <span class="key">return</span> fileSpec.substr(pos+1);
<span class="number">  528     </span>    <span class="key">return</span> fileSpec.substr(pos+1, pos2-pos-1);
<span class="number">  529     </span>  }</span>
<span class="number">  530     </span>}</span>
<span class="number">  531     </span><span class="comment">//----&lt get extension from fileSpec &gt----------------------------------</span>
<span class="number">  532     </span>  
<span class="number">  533     </span>std::string Path::getExt(const std::string& fileSpec)
<span class="number">  534   </span><span class="minmax" onclick="toggleminmax(this, 'sp533')" onmouseover="highlight('sp533')" onmouseout="removeHighlight('sp533')">-</span><span id="sp533">{
<span class="number">  535     </span>  size_t pos1 = fileSpec.find_last_of(<span class="str">'/'</span>);
<span class="number">  536     </span>  size_t pos2 = fileSpec.find_last_of(<span class="str">'\\'</span>);
<span class="number">  537     </span>  size_t pos = fileSpec.find_last_of(<span class="str">'.'</span>);
<span class="number">  538     </span>  <span class="comment">// handle ../ or ..\\ with no extension</span>
<span class="number">  539     </span>  <span class="key">if</span>(pos1 &lt fileSpec.length() || pos2 &lt fileSpec.length())
<span class="number">  540   </span><span class="minmax" onclick="toggleminmax(this, 'sp539')" onmouseover="highlight('sp539')" onmouseout="removeHighlight('sp539')">-</span>  <span id="sp539">{
<span class="number">  541     </span>    <span class="key">if</span>(pos &lt min(pos1, pos2))
<span class="number">  542     </span>      <span class="key">return</span> std::string(<span class="str">""</span>);
<span class="number">  543     </span>  }</span>
<span class="number">  544     </span>  <span class="comment">// only . is extension delimiter</span>
<span class="number">  545     </span>  <span class="key">if</span>(0 &lt= pos && pos &lt fileSpec.length())
<span class="number">  546     </span>    <span class="key">return</span> toLower(fileSpec.substr(pos+1,fileSpec.length()-pos));
<span class="number">  547     </span>  <span class="key">return</span> std::string(<span class="str">""</span>);
<span class="number">  548     </span>}</span>
<span class="number">  549     </span><span class="comment">//----&lt get path from fileSpec &gt---------------------------------------</span>
<span class="number">  550     </span>
<span class="number">  551     </span>std::string Path::getPath(const std::string &fileSpec)
<span class="number">  552   </span><span class="minmax" onclick="toggleminmax(this, 'sp551')" onmouseover="highlight('sp551')" onmouseout="removeHighlight('sp551')">-</span><span id="sp551">{
<span class="number">  553     </span>  size_t pos = fileSpec.find_last_of(<span class="str">"/"</span>);
<span class="number">  554     </span>  <span class="key">if</span>(pos &gt= fileSpec.length())
<span class="number">  555     </span>    pos = fileSpec.find_last_of(<span class="str">"\\"</span>);
<span class="number">  556     </span>  <span class="key">if</span>(pos &gt= fileSpec.length())
<span class="number">  557     </span>    <span class="key">return</span> <span class="str">"."</span>;
<span class="number">  558     </span>  <span class="key">if</span>(fileSpec.find(<span class="str">"."</span>,pos+1))
<span class="number">  559     </span>    <span class="key">return</span> fileSpec.substr(0,pos+1);
<span class="number">  560     </span>  <span class="key">return</span> fileSpec;
<span class="number">  561     </span>}</span>
<span class="number">  562     </span><span class="comment">//----&lt get absoluth path from fileSpec &gt------------------------------</span>
<span class="number">  563     </span>
<span class="number">  564     </span>std::string Path::getFullFileSpec(const std::string &fileSpec)
<span class="number">  565   </span><span class="minmax" onclick="toggleminmax(this, 'sp564')" onmouseover="highlight('sp564')" onmouseout="removeHighlight('sp564')">-</span><span id="sp564">{
<span class="number">  566     </span>  const size_t BufSize = 256;
<span class="number">  567     </span>  <span class="key">char</span> buffer[BufSize];
<span class="number">  568     </span>  <span class="key">char</span> filebuffer[BufSize];  <span class="comment">// don't use but GetFullPathName will</span>
<span class="number">  569     </span>  <span class="key">char</span>* name = filebuffer;
<span class="number">  570     </span>  ::GetFullPathNameA(fileSpec.c_str(),BufSize, buffer, &name);
<span class="number">  571     </span>  <span class="key">return</span> std::string(buffer);
<span class="number">  572     </span>}</span>
<span class="number">  573     </span><span class="comment">//----&lt create file spec from path and name &gt--------------------------</span>
<span class="number">  574     </span>
<span class="number">  575     </span>std::string Path::fileSpec(const std::string &path, const std::string &name)
<span class="number">  576   </span><span class="minmax" onclick="toggleminmax(this, 'sp575')" onmouseover="highlight('sp575')" onmouseout="removeHighlight('sp575')">-</span><span id="sp575">{
<span class="number">  577     </span>  std::string fs;
<span class="number">  578     </span>  size_t len = path.size();
<span class="number">  579     </span>  <span class="key">if</span>(path[len-1] == <span class="str">'/'</span> || path[len-1] == <span class="str">'\\'</span>)
<span class="number">  580     </span>    fs = path + name;
<span class="number">  581     </span>  <span class="key">else</span>
<span class="number">  582   </span><span class="minmax" onclick="toggleminmax(this, 'sp581')" onmouseover="highlight('sp581')" onmouseout="removeHighlight('sp581')">-</span>  <span id="sp581">{
<span class="number">  583     </span>    <span class="key">if</span>(path.find(<span class="str">"/"</span>) &lt path.size())
<span class="number">  584     </span>      fs = path + <span class="str">"/"</span> + name;
<span class="number">  585     </span>    <span class="key">else</span> <span class="key">if</span>(path.find(<span class="str">"\\"</span>) &lt path.size())
<span class="number">  586     </span>      fs = path + <span class="str">"\\"</span> + name;
<span class="number">  587     </span>    <span class="key">else</span>
<span class="number">  588     </span>      fs = path + <span class="str">"/"</span> + name;
<span class="number">  589     </span>  }</span>
<span class="number">  590     </span>  <span class="key">return</span> fs;
<span class="number">  591     </span>}</span>
<span class="number">  592     </span><span class="comment">//----&lt return name of the current directory &gt-----------------------------</span>
<span class="number">  593     </span>
<span class="number">  594     </span>std::string Directory::getCurrentDirectory()
<span class="number">  595   </span><span class="minmax" onclick="toggleminmax(this, 'sp594')" onmouseover="highlight('sp594')" onmouseout="removeHighlight('sp594')">-</span><span id="sp594">{
<span class="number">  596     </span>  <span class="key">char</span> buffer[MAX_PATH];
<span class="number">  597     </span>  ::GetCurrentDirectoryA(MAX_PATH,buffer);
<span class="number">  598     </span>  <span class="key">return</span> std::string(buffer);
<span class="number">  599     </span>}</span>
<span class="number">  600     </span><span class="comment">//----&lt change the current directory to path &gt-----------------------------</span>
<span class="number">  601     </span>
<span class="number">  602     </span><span class="key">bool</span> Directory::setCurrentDirectory(const std::string& path)
<span class="number">  603   </span><span class="minmax" onclick="toggleminmax(this, 'sp602')" onmouseover="highlight('sp602')" onmouseout="removeHighlight('sp602')">-</span><span id="sp602">{
<span class="number">  604     </span>  <span class="key">return</span> ::SetCurrentDirectoryA(path.c_str()) != 0;
<span class="number">  605     </span>}</span>
<span class="number">  606     </span><span class="comment">//----&lt get names of all the files matching pattern (path:name) &gt----------</span>
<span class="number">  607     </span>
<span class="number">  608     </span>std::vector&ltstd::string&gt Directory::getFiles(const std::string& path, const std::string& pattern)
<span class="number">  609   </span><span class="minmax" onclick="toggleminmax(this, 'sp608')" onmouseover="highlight('sp608')" onmouseout="removeHighlight('sp608')">-</span><span id="sp608">{
<span class="number">  610     </span>  std::vector&ltstd::string&gt files;
<span class="number">  611     </span>  FileSystemSearch fss;
<span class="number">  612     </span>  std::string file = fss.firstFile(path, pattern);
<span class="number">  613     </span>  <span class="key">if</span>(file.size() == 0)
<span class="number">  614     </span>    <span class="key">return</span> files;
<span class="number">  615     </span>  files.push_back(file);
<span class="number">  616     </span>  <span class="key">while</span>(<span class="key">true</span>)
<span class="number">  617   </span><span class="minmax" onclick="toggleminmax(this, 'sp616')" onmouseover="highlight('sp616')" onmouseout="removeHighlight('sp616')">-</span>  <span id="sp616">{
<span class="number">  618     </span>    file = fss.nextFile();
<span class="number">  619     </span>    <span class="key">if</span>(file.size() == 0)
<span class="number">  620     </span>      <span class="key">return</span> files;
<span class="number">  621     </span>    files.push_back(file);
<span class="number">  622     </span>  }</span>
<span class="number">  623     </span>  <span class="key">return</span> files;
<span class="number">  624     </span>}</span>
<span class="number">  625     </span><span class="comment">//----&lt get names of all directories matching pattern (path:name) &gt--------</span>
<span class="number">  626     </span>
<span class="number">  627     </span>std::vector&ltstd::string&gt Directory::getDirectories(const std::string& path, const std::string& pattern)
<span class="number">  628   </span><span class="minmax" onclick="toggleminmax(this, 'sp627')" onmouseover="highlight('sp627')" onmouseout="removeHighlight('sp627')">-</span><span id="sp627">{
<span class="number">  629     </span>  std::vector&ltstd::string&gt dirs;
<span class="number">  630     </span>  FileSystemSearch fss;
<span class="number">  631     </span>  std::string dir = fss.firstDirectory(path, pattern);
<span class="number">  632     </span>  <span class="key">if</span>(dir.size() == 0)
<span class="number">  633     </span>    <span class="key">return</span> dirs;
<span class="number">  634     </span>  dirs.push_back(dir);
<span class="number">  635     </span>  <span class="key">while</span>(<span class="key">true</span>)
<span class="number">  636   </span><span class="minmax" onclick="toggleminmax(this, 'sp635')" onmouseover="highlight('sp635')" onmouseout="removeHighlight('sp635')">-</span>  <span id="sp635">{
<span class="number">  637     </span>    dir = fss.nextDirectory();
<span class="number">  638     </span>    <span class="key">if</span>(dir.size() == 0)
<span class="number">  639     </span>      <span class="key">return</span> dirs;
<span class="number">  640     </span>    dirs.push_back(dir);
<span class="number">  641     </span>  }</span>
<span class="number">  642     </span>  <span class="key">return</span> dirs;
<span class="number">  643     </span>}</span>
<span class="number">  644     </span><span class="comment">//----&lt create directory &gt-------------------------------------------------</span>
<span class="number">  645     </span>
<span class="number">  646     </span><span class="key">bool</span> Directory::create(const std::string& path)
<span class="number">  647   </span><span class="minmax" onclick="toggleminmax(this, 'sp646')" onmouseover="highlight('sp646')" onmouseout="removeHighlight('sp646')">-</span><span id="sp646">{
<span class="number">  648     </span>  <span class="key">return</span> ::CreateDirectoryA(path.c_str(), NULL) == 0;
<span class="number">  649     </span>}</span>
<span class="number">  650     </span><span class="comment">//----&lt does directory exist? &gt--------------------------------------------</span>
<span class="number">  651     </span>
<span class="number">  652     </span><span class="key">bool</span> Directory::exists(const std::string& path)
<span class="number">  653   </span><span class="minmax" onclick="toggleminmax(this, 'sp652')" onmouseover="highlight('sp652')" onmouseout="removeHighlight('sp652')">-</span><span id="sp652">{
<span class="number">  654     </span>  DWORD dwAttrib = GetFileAttributesA(path.c_str());
<span class="number">  655     </span>
<span class="number">  656     </span>  <span class="key">return</span> (dwAttrib != INVALID_FILE_ATTRIBUTES && 
<span class="number">  657     </span>         (dwAttrib & FILE_ATTRIBUTE_DIRECTORY));
<span class="number">  658     </span>}</span>
<span class="number">  659     </span><span class="comment">//----&lt remove directory &gt-------------------------------------------------</span>
<span class="number">  660     </span>
<span class="number">  661     </span><span class="key">bool</span> Directory::remove(const std::string& path)
<span class="number">  662   </span><span class="minmax" onclick="toggleminmax(this, 'sp661')" onmouseover="highlight('sp661')" onmouseout="removeHighlight('sp661')">-</span><span id="sp661">{
<span class="number">  663     </span>  <span class="key">return</span> ::RemoveDirectoryA(path.c_str()) == 0;
<span class="number">  664     </span>}</span>
<span class="number">  665     </span><span class="comment">//----&lt find first file &gt--------------------------------------------------</span>
<span class="number">  666     </span>
<span class="number">  667     </span>std::string FileSystemSearch::firstFile(const std::string& path, const std::string& pattern)
<span class="number">  668   </span><span class="minmax" onclick="toggleminmax(this, 'sp667')" onmouseover="highlight('sp667')" onmouseout="removeHighlight('sp667')">-</span><span id="sp667">{
<span class="number">  669     </span>  hFindFile = ::FindFirstFileA(Path::fileSpec(path, pattern).c_str(), pFindFileData);
<span class="number">  670     </span>  <span class="key">if</span>(hFindFile != INVALID_HANDLE_VALUE)
<span class="number">  671   </span><span class="minmax" onclick="toggleminmax(this, 'sp670')" onmouseover="highlight('sp670')" onmouseout="removeHighlight('sp670')">-</span>  <span id="sp670">{
<span class="number">  672     </span>    <span class="key">if</span>(!(pFindFileData-&gtdwFileAttributes & FILE_ATTRIBUTE_DIRECTORY))
<span class="number">  673     </span>      <span class="key">return</span> pFindFileData-&gtcFileName;
<span class="number">  674     </span>    <span class="key">else</span>
<span class="number">  675     </span>      <span class="key">while</span>(::FindNextFileA(hFindFile, pFindFileData))
<span class="number">  676     </span>        <span class="key">if</span>(!(pFindFileData-&gtdwFileAttributes & FILE_ATTRIBUTE_DIRECTORY))
<span class="number">  677     </span>          <span class="key">return</span> pFindFileData-&gtcFileName;
<span class="number">  678     </span>  }</span>
<span class="number">  679     </span>  <span class="key">return</span> <span class="str">""</span>;
<span class="number">  680     </span>}</span>
<span class="number">  681     </span><span class="comment">//----&lt find next file &gt---------------------------------------------------</span>
<span class="number">  682     </span>
<span class="number">  683     </span>std::string FileSystemSearch::nextFile()
<span class="number">  684   </span><span class="minmax" onclick="toggleminmax(this, 'sp683')" onmouseover="highlight('sp683')" onmouseout="removeHighlight('sp683')">-</span><span id="sp683">{
<span class="number">  685     </span>  <span class="key">while</span>(::FindNextFileA(hFindFile, pFindFileData))
<span class="number">  686     </span>    <span class="key">if</span>(!(pFindFileData-&gtdwFileAttributes & FILE_ATTRIBUTE_DIRECTORY))
<span class="number">  687     </span>      <span class="key">return</span> pFindFileData-&gtcFileName;
<span class="number">  688     </span>  <span class="key">return</span> <span class="str">""</span>;
<span class="number">  689     </span>}</span>
<span class="number">  690     </span><span class="comment">//----&lt find first file &gt--------------------------------------------------</span>
<span class="number">  691     </span>
<span class="number">  692     </span>std::string FileSystemSearch::firstDirectory(const std::string& path, const std::string& pattern)
<span class="number">  693   </span><span class="minmax" onclick="toggleminmax(this, 'sp692')" onmouseover="highlight('sp692')" onmouseout="removeHighlight('sp692')">-</span><span id="sp692">{
<span class="number">  694     </span>  hFindFile = ::FindFirstFileA(Path::fileSpec(path, pattern).c_str(), pFindFileData);
<span class="number">  695     </span>  <span class="key">if</span>(hFindFile != INVALID_HANDLE_VALUE)
<span class="number">  696   </span><span class="minmax" onclick="toggleminmax(this, 'sp695')" onmouseover="highlight('sp695')" onmouseout="removeHighlight('sp695')">-</span>  <span id="sp695">{
<span class="number">  697     </span>    <span class="key">if</span>(pFindFileData-&gtdwFileAttributes & FILE_ATTRIBUTE_DIRECTORY)
<span class="number">  698     </span>      <span class="key">return</span> pFindFileData-&gtcFileName;
<span class="number">  699     </span>    <span class="key">else</span>
<span class="number">  700     </span>      <span class="key">while</span>(::FindNextFileA(hFindFile, pFindFileData))
<span class="number">  701     </span>        <span class="key">if</span>(pFindFileData-&gtdwFileAttributes & FILE_ATTRIBUTE_DIRECTORY)
<span class="number">  702     </span>          <span class="key">return</span> pFindFileData-&gtcFileName;
<span class="number">  703     </span>  }</span>
<span class="number">  704     </span>  <span class="key">return</span> <span class="str">""</span>;
<span class="number">  705     </span>}</span>
<span class="number">  706     </span><span class="comment">//----&lt find next file &gt---------------------------------------------------</span>
<span class="number">  707     </span>
<span class="number">  708     </span>std::string FileSystemSearch::nextDirectory()
<span class="number">  709   </span><span class="minmax" onclick="toggleminmax(this, 'sp708')" onmouseover="highlight('sp708')" onmouseout="removeHighlight('sp708')">-</span><span id="sp708">{
<span class="number">  710     </span>  <span class="key">while</span>(::FindNextFileA(hFindFile, pFindFileData))
<span class="number">  711     </span>    <span class="key">if</span>(pFindFileData-&gtdwFileAttributes & FILE_ATTRIBUTE_DIRECTORY)
<span class="number">  712     </span>      <span class="key">return</span> pFindFileData-&gtcFileName;
<span class="number">  713     </span>  <span class="key">return</span> <span class="str">""</span>;
<span class="number">  714     </span>}</span>
<span class="number">  715     </span><span class="comment">//----&lt test stub &gt--------------------------------------------------------</span>
<span class="number">  716     </span>
<span class="number">  717     </span><span class="directive">#ifdef</span> TEST_FILESYSTEM
<span class="number">  718     </span>
<span class="number">  719     </span><span class="key">void</span> title(const std::string& title, <span class="key">char</span> ch=<span class="str">'='</span>)
<span class="number">  720   </span><span class="minmax" onclick="toggleminmax(this, 'sp719')" onmouseover="highlight('sp719')" onmouseout="removeHighlight('sp719')">-</span><span id="sp719">{
<span class="number">  721     </span>  std::cout &lt&lt <span class="str">"\n  "</span> &lt&lt title;
<span class="number">  722     </span>  std::cout &lt&lt <span class="str">"\n "</span> &lt&lt std::string(title.size()+2, ch);
<span class="number">  723     </span>}</span>
<span class="number">  724     </span><span class="key">int</span> main(<span class="key">int</span> argc, <span class="key">char</span>* argv[])
<span class="number">  725   </span><span class="minmax" onclick="toggleminmax(this, 'sp724')" onmouseover="highlight('sp724')" onmouseout="removeHighlight('sp724')">-</span><span id="sp724">{
<span class="number">  726     </span>  title(<span class="str">"Demonstrate Path Class"</span>);
<span class="number">  727     </span>
<span class="number">  728     </span>  std::string fs = Path::fileSpec(<span class="str">"."</span>,<span class="str">"temp.txt"</span>);
<span class="number">  729     </span>  std::cout &lt&lt <span class="str">"\n  Path::fileSpec(\".\",\"temp.txt\") = "</span> &lt&lt fs;
<span class="number">  730     </span>
<span class="number">  731     </span>  std::string path = Path::getPath(fs);
<span class="number">  732     </span>  std::cout &lt&lt <span class="str">"\n  Path::getPath(\""</span> + fs + <span class="str">"\") = "</span> &lt&lt path;
<span class="number">  733     </span>  
<span class="number">  734     </span>  std::string ffs = Path::getFullFileSpec(fs);
<span class="number">  735     </span>  std::cout &lt&lt <span class="str">"\n  Path::getFullFileSpec(\""</span> + fs + <span class="str">"\") = "</span> &lt&lt ffs;
<span class="number">  736     </span>  
<span class="number">  737     </span>  std::string name = Path::getName(fs);
<span class="number">  738     </span>  std::cout &lt&lt <span class="str">"\n  Path::getName(\""</span> + fs + <span class="str">"\") = "</span> &lt&lt name;
<span class="number">  739     </span>
<span class="number">  740     </span>  std::string ext = Path::getExt(fs);
<span class="number">  741     </span>  std::cout &lt&lt <span class="str">"\n  Path::getExt(\""</span> + fs + <span class="str">"\") = "</span> &lt&lt ext;
<span class="number">  742     </span>
<span class="number">  743     </span>  std::string upper = Path::toUpper(<span class="str">"temp.txt"</span>);
<span class="number">  744     </span>  std::cout &lt&lt <span class="str">"\n  Path::toUpper(\"temp.txt\") = "</span> &lt&lt upper;
<span class="number">  745     </span>
<span class="number">  746     </span>  std::string lower = Path::toLower(<span class="str">"Temp.Txt"</span>);
<span class="number">  747     </span>  std::cout &lt&lt <span class="str">"\n  Path::toLower(\"Temp.Txt\") = "</span> &lt&lt lower;
<span class="number">  748     </span>  std::cout &lt&lt std::endl;
<span class="number">  749   </span><span class="minmax" onclick="toggleminmax(this, 'sp748')" onmouseover="highlight('sp748')" onmouseout="removeHighlight('sp748')">-</span>  <span id="sp748"><span class="comment">/*
<span class="number">  750     </span>  title("Demonstrate FileSystemSearch class");
<span class="number">  751     </span>
<span class="number">  752     </span>  const size_t PathSetSize = 2;
<span class="number">  753     </span>  std::string home = ::getenv("HOMEDRIVE");
<span class="number">  754     </span>  std::string pathSet[] = { home+"\\\\", "." };
<span class="number">  755     </span>  FileSystemSearch fss;
<span class="number">  756     </span>  for(size_t i = 0; i&ltPathSetSize; ++i)
<span class="number">  757     </span>  {
<span class="number">  758     </span>    std::cout &lt&lt "\n  searching for files on \"" &lt&lt pathSet[i] &lt&lt "\"";
<span class="number">  759     </span>    std::cout &lt&lt "\n " &lt&lt std::string(27 + pathSet[i].size(), '-');
<span class="number">  760     </span>    std::string searchPath = pathSet[i];
<span class="number">  761     </span>    std::string fileName = fss.firstFile(searchPath);
<span class="number">  762     </span>    if(fileName.size() &gt 0)
<span class="number">  763     </span>      std::cout &lt&lt "\n  " &lt&lt fileName;
<span class="number">  764     </span>    else
<span class="number">  765     </span>      std::cout &lt&lt "\n  no files match search";
<span class="number">  766     </span>    while(true) {
<span class="number">  767     </span>      fileName = fss.nextFile();
<span class="number">  768     </span>      if(fileName.size() &gt 0)
<span class="number">  769     </span>        std::cout &lt&lt "\n  " &lt&lt fileName;
<span class="number">  770     </span>      else
<span class="number">  771     </span>        break;
<span class="number">  772     </span>    }
<span class="number">  773     </span>    std::cout &lt&lt std::endl;
<span class="number">  774     </span>
<span class="number">  775     </span>    std::cout &lt&lt "\n  searching for directories on \"" &lt&lt pathSet[i] &lt&lt "\"";
<span class="number">  776     </span>    std::cout &lt&lt "\n " &lt&lt std::string(33 + pathSet[i].size(), '-');
<span class="number">  777     </span>    std::string dirName = fss.firstDirectory(searchPath);
<span class="number">  778     </span>    if(dirName.size() &gt 0)
<span class="number">  779     </span>      std::cout &lt&lt "\n  " &lt&lt dirName;
<span class="number">  780     </span>    else
<span class="number">  781     </span>      std::cout &lt&lt "\n  no directories match search";
<span class="number">  782     </span>    while(true)
<span class="number">  783     </span>    {
<span class="number">  784     </span>      dirName = fss.nextDirectory();
<span class="number">  785     </span>      if(dirName.size() &gt 0)
<span class="number">  786     </span>        std::cout &lt&lt "\n  " &lt&lt dirName;
<span class="number">  787     </span>      else
<span class="number">  788     </span>        break;
<span class="number">  789     </span>    }
<span class="number">  790     </span>    std::cout &lt&lt std::endl;
<span class="number">  791     </span>  }
<span class="number">  792     </span>  */</span></span>
<span class="number">  793     </span>  title(<span class="str">"Demonstrate Directory class"</span>);
<span class="number">  794     </span>
<span class="number">  795     </span>  <span class="comment">// Display contents of current directory</span>
<span class="number">  796     </span>
<span class="number">  797     </span>  std::cout &lt&lt <span class="str">"\n  current directory is:\n    "</span> &lt&lt Directory::getCurrentDirectory();
<span class="number">  798     </span>  std::cout &lt&lt <span class="str">"\n  It contains files:"</span>;
<span class="number">  799     </span>  std::vector&ltstd::string&gt currfiles = Directory::getFiles();
<span class="number">  800     </span>  <span class="comment">///////////////////////////////////////////////////////</span>
<span class="number">  801     </span>  <span class="comment">// This works too</span>
<span class="number">  802     </span>  <span class="comment">// std::vector&ltstd::string&gt currfiles = d.getFiles();  </span>
<span class="number">  803     </span>  <span class="key">for</span>(size_t i=0; i&ltcurrfiles.size(); ++i)
<span class="number">  804     </span>    std::cout &lt&lt <span class="str">"\n    "</span> &lt&lt currfiles[i].c_str();
<span class="number">  805     </span>  std::cout &lt&lt <span class="str">"\n  and contains directories:"</span>;
<span class="number">  806     </span>  std::vector&ltstd::string&gt currdirs = Directory::getDirectories();
<span class="number">  807     </span>  <span class="key">for</span>(size_t i=0; i&ltcurrdirs.size(); ++i)
<span class="number">  808     </span>    std::cout &lt&lt <span class="str">"\n    "</span> &lt&lt currdirs[i].c_str();
<span class="number">  809     </span>  std::cout &lt&lt <span class="str">"\n"</span>;
<span class="number">  810     </span>
<span class="number">  811     </span>  <span class="comment">// Display contents of non-current directory</span>
<span class="number">  812     </span>
<span class="number">  813     </span>  std::cout &lt&lt <span class="str">"\n  .txt files residing in C:/temp are:"</span>;
<span class="number">  814     </span>  currfiles = Directory::getFiles(<span class="str">"c:/temp/"</span>, <span class="str">"*.txt"</span>);
<span class="number">  815     </span>
<span class="number">  816     </span>  <span class="comment">// if we want fully qualified file names, we have to</span>
<span class="number">  817     </span>  <span class="comment">// set the current directory to the path on which the files</span>
<span class="number">  818     </span>  <span class="comment">// reside, if it isn't already so set</span>
<span class="number">  819     </span>
<span class="number">  820     </span>  std::string currDir = Directory::getCurrentDirectory();
<span class="number">  821     </span>  Directory::setCurrentDirectory(<span class="str">"c:/temp/"</span>);
<span class="number">  822     </span>  <span class="key">for</span>(size_t i=0; i&ltcurrfiles.size(); ++i)
<span class="number">  823     </span>    std::cout &lt&lt <span class="str">"\n    "</span> &lt&lt Path::getFullFileSpec(currfiles[i]).c_str();
<span class="number">  824     </span>  Directory::setCurrentDirectory(currDir);
<span class="number">  825     </span>
<span class="number">  826     </span>  <span class="comment">// we have to restore the current directory so the</span>
<span class="number">  827     </span>  <span class="comment">// remaining tests work</span>
<span class="number">  828     </span>
<span class="number">  829     </span>  <span class="comment">// it's probably easier just to use Path::fileSpec(path, filename)</span>
<span class="number">  830     </span>  <span class="comment">// like this:</span>
<span class="number">  831     </span>
<span class="number">  832     </span>  <span class="key">for</span> (size_t i = 0; i&ltcurrfiles.size(); ++i)
<span class="number">  833     </span>    std::cout &lt&lt <span class="str">"\n    "</span> &lt&lt Path::fileSpec(<span class="str">"c:\\temp\\"</span>, currfiles[i]).c_str();
<span class="number">  834     </span>
<span class="number">  835     </span>  std::cout &lt&lt <span class="str">"\n"</span>;
<span class="number">  836     </span>  std::cout &lt&lt <span class="str">"\n  directories residing in C:/temp are:"</span>;
<span class="number">  837     </span>  currdirs = Directory::getDirectories(<span class="str">"c:/temp/"</span>);
<span class="number">  838     </span>  <span class="key">for</span>(size_t i=0; i&ltcurrdirs.size(); ++i)
<span class="number">  839     </span>    std::cout &lt&lt <span class="str">"\n    "</span> &lt&lt currdirs[i].c_str();
<span class="number">  840     </span>  std::cout &lt&lt <span class="str">"\n"</span>;
<span class="number">  841     </span>
<span class="number">  842     </span>  <span class="comment">// Create directory</span>
<span class="number">  843     </span>
<span class="number">  844     </span>  title(<span class="str">"Demonstrate FileInfo Class Operations"</span>, <span class="str">'='</span>);
<span class="number">  845     </span>  std::cout &lt&lt <span class="str">"\n"</span>;
<span class="number">  846     </span>
<span class="number">  847     </span>  Directory::setCurrentDirectory(<span class="str">"."</span>);
<span class="number">  848     </span>  std::cout &lt&lt <span class="str">"\n  current path is \""</span> &lt&lt Directory::getCurrentDirectory();
<span class="number">  849     </span>  
<span class="number">  850     </span>  std::string fn1;
<span class="number">  851     </span>  <span class="key">if</span>(argc &gt 1)
<span class="number">  852     </span>    fn1 = argv[1];
<span class="number">  853     </span>  <span class="key">else</span>
<span class="number">  854     </span>    fn1 = <span class="str">"c:\\temp\\test.txt"</span>;
<span class="number">  855     </span>  FileInfo fi(fn1);
<span class="number">  856     </span>
<span class="number">  857     </span>  <span class="key">if</span>(fi.good())
<span class="number">  858   </span><span class="minmax" onclick="toggleminmax(this, 'sp857')" onmouseover="highlight('sp857')" onmouseout="removeHighlight('sp857')">-</span>  <span id="sp857">{
<span class="number">  859     </span>    std::cout &lt&lt <span class="str">"\n  name: "</span> &lt&lt <span class="str">"\t"</span> &lt&lt fi.name();
<span class="number">  860     </span>    std::cout &lt&lt <span class="str">"\n  date: "</span> &lt&lt <span class="str">"\t"</span> &lt&lt fi.date();
<span class="number">  861     </span>    std::cout &lt&lt <span class="str">"\n  date: "</span> &lt&lt <span class="str">"\t"</span> &lt&lt fi.date(FileInfo::dateformat);
<span class="number">  862     </span>    std::cout &lt&lt <span class="str">"\n  date: "</span> &lt&lt <span class="str">"\t"</span> &lt&lt fi.date(FileInfo::timeformat);
<span class="number">  863     </span>    std::cout &lt&lt <span class="str">"\n  size: "</span> &lt&lt <span class="str">"\t"</span> &lt&lt fi.size() &lt&lt <span class="str">" bytes"</span>;
<span class="number">  864     </span>    <span class="key">if</span>(fi.isArchive())
<span class="number">  865     </span>      std::cout &lt&lt <span class="str">"\n  is archive"</span>;
<span class="number">  866     </span>    <span class="key">else</span>
<span class="number">  867     </span>      std::cout &lt&lt <span class="str">"\n  is not archive"</span>;
<span class="number">  868     </span>    <span class="key">if</span>(fi.isCompressed())
<span class="number">  869     </span>      std::cout &lt&lt <span class="str">"\n  is compressed"</span>;
<span class="number">  870     </span>    <span class="key">else</span>
<span class="number">  871     </span>      std::cout &lt&lt <span class="str">"\n  is not compressed"</span>;
<span class="number">  872     </span>    <span class="key">if</span>(fi.isDirectory())
<span class="number">  873     </span>      std::cout &lt&lt <span class="str">"\n  is directory"</span>;
<span class="number">  874     </span>    <span class="key">else</span>
<span class="number">  875     </span>      std::cout &lt&lt <span class="str">"\n  is not directory"</span>;
<span class="number">  876     </span>    <span class="key">if</span>(fi.isEncrypted())
<span class="number">  877     </span>      std::cout &lt&lt <span class="str">"\n  is encrypted"</span>;
<span class="number">  878     </span>    <span class="key">else</span>
<span class="number">  879     </span>      std::cout &lt&lt <span class="str">"\n  is not encrypted"</span>;
<span class="number">  880     </span>    <span class="key">if</span>(fi.isHidden())
<span class="number">  881     </span>      std::cout &lt&lt <span class="str">"\n  is hidden"</span>;
<span class="number">  882     </span>    <span class="key">else</span>
<span class="number">  883     </span>      std::cout &lt&lt <span class="str">"\n  is not hidden"</span>;
<span class="number">  884     </span>    <span class="key">if</span>(fi.isNormal())
<span class="number">  885     </span>      std::cout &lt&lt <span class="str">"\n  is normal"</span>;
<span class="number">  886     </span>    <span class="key">else</span>
<span class="number">  887     </span>      std::cout &lt&lt <span class="str">"\n  is not normal"</span>;
<span class="number">  888     </span>    <span class="key">if</span>(fi.isOffLine())
<span class="number">  889     </span>      std::cout &lt&lt <span class="str">"\n  is offline"</span>;
<span class="number">  890     </span>    <span class="key">else</span>
<span class="number">  891     </span>      std::cout &lt&lt <span class="str">"\n  is not offline"</span>;
<span class="number">  892     </span>    <span class="key">if</span>(fi.isReadOnly())
<span class="number">  893     </span>      std::cout &lt&lt <span class="str">"\n  is readonly"</span>;
<span class="number">  894     </span>    <span class="key">else</span>
<span class="number">  895     </span>      std::cout &lt&lt <span class="str">"\n  is not readonly"</span>;
<span class="number">  896     </span>    <span class="key">if</span>(fi.isSystem())
<span class="number">  897     </span>      std::cout &lt&lt <span class="str">"\n  is system"</span>;
<span class="number">  898     </span>    <span class="key">else</span>
<span class="number">  899     </span>      std::cout &lt&lt <span class="str">"\n  is not system"</span>;
<span class="number">  900     </span>    <span class="key">if</span>(fi.isTemporary())
<span class="number">  901     </span>      std::cout &lt&lt <span class="str">"\n  is temporary"</span>;
<span class="number">  902     </span>    <span class="key">else</span>
<span class="number">  903     </span>      std::cout &lt&lt <span class="str">"\n  is not temporary"</span>;
<span class="number">  904     </span>  }</span>
<span class="number">  905     </span>  <span class="key">else</span>
<span class="number">  906     </span>    std::cout &lt&lt <span class="str">"\n  filename "</span> &lt&lt fn1 &lt&lt <span class="str">" is not valid in this context\n"</span>;
<span class="number">  907     </span>
<span class="number">  908     </span>  std::string fn2;
<span class="number">  909     </span>  <span class="key">if</span>(argc &gt 2)
<span class="number">  910   </span><span class="minmax" onclick="toggleminmax(this, 'sp909')" onmouseover="highlight('sp909')" onmouseout="removeHighlight('sp909')">-</span>  <span id="sp909">{
<span class="number">  911     </span>    fn1 = argv[1];
<span class="number">  912     </span>    fn2 = argv[2];
<span class="number">  913     </span>  }</span>
<span class="number">  914     </span>  <span class="key">else</span>
<span class="number">  915   </span><span class="minmax" onclick="toggleminmax(this, 'sp914')" onmouseover="highlight('sp914')" onmouseout="removeHighlight('sp914')">-</span>  <span id="sp914">{
<span class="number">  916     </span>    fn1 = <span class="str">"FileSystem.h"</span>;
<span class="number">  917     </span>    fn2 = <span class="str">"FileSystem.cpp"</span>;
<span class="number">  918     </span>  }</span>
<span class="number">  919     </span>  FileInfo fi1(fn1);
<span class="number">  920     </span>  FileInfo fi2(fn2);
<span class="number">  921     </span>  <span class="key">if</span>(fi1.good() && fi2.good())
<span class="number">  922   </span><span class="minmax" onclick="toggleminmax(this, 'sp921')" onmouseover="highlight('sp921')" onmouseout="removeHighlight('sp921')">-</span>  <span id="sp921">{
<span class="number">  923     </span>    <span class="key">if</span>(fi1 == fi1)
<span class="number">  924     </span>      std::cout &lt&lt <span class="str">"\n  "</span> &lt&lt fi1.name() &lt&lt <span class="str">" == "</span> &lt&lt fi1.name();
<span class="number">  925     </span>    <span class="key">else</span>
<span class="number">  926     </span>      std::cout &lt&lt <span class="str">"\n  "</span> &lt&lt fi1.name() &lt&lt <span class="str">" != "</span> &lt&lt fi1.name();
<span class="number">  927     </span>    <span class="key">if</span>(fi1 &lt fi1)
<span class="number">  928     </span>      std::cout &lt&lt <span class="str">"\n  "</span> &lt&lt fi1.name() &lt&lt <span class="str">" &lt "</span> &lt&lt fi1.name();
<span class="number">  929     </span>    <span class="key">else</span>
<span class="number">  930     </span>      std::cout &lt&lt <span class="str">"\n  "</span> &lt&lt fi1.name() &lt&lt <span class="str">" &gt= "</span> &lt&lt fi1.name();
<span class="number">  931     </span>    <span class="key">if</span>(fi1 == fi2)
<span class="number">  932     </span>      std::cout &lt&lt <span class="str">"\n  "</span> &lt&lt fi1.name() &lt&lt <span class="str">" == "</span> &lt&lt fi2.name();
<span class="number">  933     </span>    <span class="key">else</span>
<span class="number">  934     </span>      std::cout &lt&lt <span class="str">"\n  "</span> &lt&lt fi1.name() &lt&lt <span class="str">" != "</span> &lt&lt fi2.name();
<span class="number">  935     </span>    <span class="key">if</span>(fi1 &lt fi2)
<span class="number">  936     </span>      std::cout &lt&lt <span class="str">"\n  "</span> &lt&lt fi1.name() &lt&lt <span class="str">" &lt "</span> &lt&lt fi2.name();
<span class="number">  937     </span>    <span class="key">else</span>
<span class="number">  938     </span>      std::cout &lt&lt <span class="str">"\n  "</span> &lt&lt fi1.name() &lt&lt <span class="str">" &gt= "</span> &lt&lt fi2.name();
<span class="number">  939     </span>    <span class="key">if</span>(fi1.smaller(fi2))
<span class="number">  940     </span>      std::cout &lt&lt <span class="str">"\n  "</span> &lt&lt fi1.name() &lt&lt <span class="str">" is smaller than "</span> &lt&lt fi2.name();
<span class="number">  941     </span>    <span class="key">else</span>
<span class="number">  942     </span>      std::cout &lt&lt <span class="str">"\n  "</span> &lt&lt fi1.name() &lt&lt <span class="str">" is not smaller than "</span> &lt&lt fi2.name();
<span class="number">  943     </span>    <span class="key">if</span>(fi1.earlier(fi2))
<span class="number">  944     </span>      std::cout &lt&lt <span class="str">"\n  "</span> &lt&lt fi1.name() &lt&lt <span class="str">" is earlier than "</span> &lt&lt fi2.name();
<span class="number">  945     </span>    <span class="key">else</span>
<span class="number">  946     </span>      std::cout &lt&lt <span class="str">"\n  "</span> &lt&lt fi1.name() &lt&lt <span class="str">" is not earlier than "</span> &lt&lt fi2.name();
<span class="number">  947     </span>    std::cout &lt&lt std::endl;
<span class="number">  948     </span>  }</span>
<span class="number">  949     </span>  <span class="key">else</span>
<span class="number">  950     </span>    std::cout &lt&lt <span class="str">"\n  files "</span> &lt&lt fn1 &lt&lt <span class="str">" and "</span> &lt&lt fn2 &lt&lt <span class="str">" are not valid in this context\n"</span>;
<span class="number">  951     </span>
<span class="number">  952     </span>  title(<span class="str">"Demonstrate File class operations"</span>, <span class="str">'='</span>);
<span class="number">  953     </span>  std::cout &lt&lt <span class="str">"\n"</span>;
<span class="number">  954     </span>
<span class="number">  955     </span>  <span class="comment">// copy binary file from one directory to another</span>
<span class="number">  956     </span>
<span class="number">  957     </span>  File me(<span class="str">"../debug/filesystemdemo.exe"</span>);
<span class="number">  958     </span>  me.open(File::in, File::binary);
<span class="number">  959     </span>  std::cout &lt&lt <span class="str">"\n  copying "</span> &lt&lt me.name().c_str() &lt&lt <span class="str">" to c:/temp"</span>;
<span class="number">  960     </span>  <span class="key">if</span>(!me.isGood())
<span class="number">  961   </span><span class="minmax" onclick="toggleminmax(this, 'sp960')" onmouseover="highlight('sp960')" onmouseout="removeHighlight('sp960')">-</span>  <span id="sp960">{
<span class="number">  962     </span>    std::cout &lt&lt <span class="str">"\n  can't open executable\n"</span>;
<span class="number">  963     </span>    std::cout &lt&lt <span class="str">"\n  looking for:\n  "</span>;
<span class="number">  964     </span>    std::cout &lt&lt Path::getFullFileSpec(me.name()) &lt&lt <span class="str">"\n"</span>;
<span class="number">  965     </span>  }</span>
<span class="number">  966     </span>  <span class="key">else</span>
<span class="number">  967   </span><span class="minmax" onclick="toggleminmax(this, 'sp966')" onmouseover="highlight('sp966')" onmouseout="removeHighlight('sp966')">-</span>  <span id="sp966">{
<span class="number">  968     </span>    File you(<span class="str">"c:/temp/fileSystemdemo.exe"</span>);
<span class="number">  969     </span>    you.open(File::out, File::binary);
<span class="number">  970     </span>    <span class="key">if</span>(you.isGood())
<span class="number">  971   </span><span class="minmax" onclick="toggleminmax(this, 'sp970')" onmouseover="highlight('sp970')" onmouseout="removeHighlight('sp970')">-</span>    <span id="sp970">{
<span class="number">  972     </span>      <span class="key">while</span>(me.isGood())
<span class="number">  973   </span><span class="minmax" onclick="toggleminmax(this, 'sp972')" onmouseover="highlight('sp972')" onmouseout="removeHighlight('sp972')">-</span>      <span id="sp972">{
<span class="number">  974     </span>        <span class="key">static</span> size_t count = 0;
<span class="number">  975     </span>        Block b = me.getBlock(1024);
<span class="number">  976     </span>        you.putBlock(b);
<span class="number">  977     </span>        <span class="key">if</span> (++count &lt 10)
<span class="number">  978   </span><span class="minmax" onclick="toggleminmax(this, 'sp977')" onmouseover="highlight('sp977')" onmouseout="removeHighlight('sp977')">-</span>        <span id="sp977">{
<span class="number">  979     </span>          std::cout &lt&lt <span class="str">"\n    reading block of "</span> &lt&lt b.size() &lt&lt <span class="str">" bytes"</span>;
<span class="number">  980     </span>          std::cout &lt&lt <span class="str">"\n    writing block of "</span> &lt&lt b.size() &lt&lt <span class="str">" bytes"</span>;
<span class="number">  981     </span>        }</span>
<span class="number">  982     </span>        <span class="key">if</span> (b.size() &lt 1024)
<span class="number">  983   </span><span class="minmax" onclick="toggleminmax(this, 'sp982')" onmouseover="highlight('sp982')" onmouseout="removeHighlight('sp982')">-</span>        <span id="sp982">{
<span class="number">  984     </span>          std::cout &lt&lt <span class="str">"\n\n    omitted "</span> &lt&lt count-10 &lt&lt <span class="str">" blocks from display\n\n"</span>;
<span class="number">  985     </span>          std::cout &lt&lt <span class="str">"\n    reading block of "</span> &lt&lt b.size() &lt&lt <span class="str">" bytes"</span>;
<span class="number">  986     </span>          std::cout &lt&lt <span class="str">"\n    writing block of "</span> &lt&lt b.size() &lt&lt <span class="str">" bytes"</span>;
<span class="number">  987     </span>        }</span>
<span class="number">  988     </span>      }</span>
<span class="number">  989     </span>      std::cout &lt&lt <span class="str">"\n"</span>;
<span class="number">  990     </span>    }</span>
<span class="number">  991     </span>  }</span>
<span class="number">  992     </span>
<span class="number">  993     </span>  <span class="comment">// save some filespecs of text files in a vector for File demonstrations</span>
<span class="number">  994     </span>
<span class="number">  995     </span>  std::vector&ltstd::string&gt files;
<span class="number">  996     </span>  <span class="key">if</span>(argc == 1)
<span class="number">  997   </span><span class="minmax" onclick="toggleminmax(this, 'sp996')" onmouseover="highlight('sp996')" onmouseout="removeHighlight('sp996')">-</span>  <span id="sp996">{
<span class="number">  998     </span>    std::cout &lt&lt <span class="str">"\n\n  Enter, on the command line, an additional filename to process.\n"</span>;
<span class="number">  999     </span>  }</span>
<span class="number">  1000    </span>
<span class="number">  1001    </span>  <span class="key">for</span>(<span class="key">int</span> i=1; i&ltargc; ++i)
<span class="number">  1002  </span><span class="minmax" onclick="toggleminmax(this, 'sp1001')" onmouseover="highlight('sp1001')" onmouseout="removeHighlight('sp1001')">-</span>  <span id="sp1001">{
<span class="number">  1003    </span>    files.push_back(argv[i]);
<span class="number">  1004    </span>  }</span>
<span class="number">  1005    </span>  files.push_back(<span class="str">"FileSystem.cpp"</span>);
<span class="number">  1006    </span>  files.push_back(<span class="str">"../FileSystemDemo/FileSystem.cpp"</span>); <span class="comment">// file from project directory</span>
<span class="number">  1007    </span>  files.push_back(<span class="str">"../test.txt"</span>);                      <span class="comment">// file in solution directory</span>
<span class="number">  1008    </span>  files.push_back(<span class="str">"foobar"</span>);                           <span class="comment">// doesn't exist</span>
<span class="number">  1009    </span>
<span class="number">  1010    </span>  <span class="comment">// open each file and display a few lines of text</span>
<span class="number">  1011    </span>
<span class="number">  1012    </span>  <span class="key">for</span>(size_t i=0; i&ltfiles.size(); ++i)
<span class="number">  1013  </span><span class="minmax" onclick="toggleminmax(this, 'sp1012')" onmouseover="highlight('sp1012')" onmouseout="removeHighlight('sp1012')">-</span>  <span id="sp1012">{
<span class="number">  1014    </span>    File file(files[i]);
<span class="number">  1015    </span>    file.open(File::in);
<span class="number">  1016    </span>    <span class="key">if</span>(!file.isGood())
<span class="number">  1017  </span><span class="minmax" onclick="toggleminmax(this, 'sp1016')" onmouseover="highlight('sp1016')" onmouseout="removeHighlight('sp1016')">-</span>    <span id="sp1016">{
<span class="number">  1018    </span>      std::cout &lt&lt <span class="str">"\n  Can't open file "</span> &lt&lt file.name();
<span class="number">  1019    </span>      std::cout &lt&lt <span class="str">"\n  Here's what the program can't find:\n  "</span> &lt&lt Path::getFullFileSpec(file.name()); 
<span class="number">  1020    </span>      <span class="key">continue</span>;
<span class="number">  1021    </span>    }</span>
<span class="number">  1022    </span>    std::string temp = std::string(<span class="str">"Processing file "</span>) + files[i];
<span class="number">  1023    </span>    title(temp, <span class="str">'-'</span>);
<span class="number">  1024    </span>    <span class="key">for</span>(<span class="key">int</span> j=0; j&lt10; ++j)
<span class="number">  1025  </span><span class="minmax" onclick="toggleminmax(this, 'sp1024')" onmouseover="highlight('sp1024')" onmouseout="removeHighlight('sp1024')">-</span>    <span id="sp1024">{
<span class="number">  1026    </span>      <span class="key">if</span>(!file.isGood())
<span class="number">  1027    </span>        <span class="key">break</span>;
<span class="number">  1028    </span>      std::cout &lt&lt <span class="str">"\n  -- "</span> &lt&lt file.getLine().c_str();
<span class="number">  1029    </span>    }</span>
<span class="number">  1030    </span>    std::cout &lt&lt <span class="str">"\n"</span>;
<span class="number">  1031    </span>  }</span>
<span class="number">  1032    </span>  std::cout &lt&lt <span class="str">"\n"</span>;
<span class="number">  1033    </span>
<span class="number">  1034    </span>  <span class="comment">// read all lines of text file into string</span>
<span class="number">  1035    </span>
<span class="number">  1036    </span>  title(<span class="str">"testing File::readAll()"</span>, <span class="str">'-'</span>);
<span class="number">  1037    </span>  std::cout &lt&lt <span class="str">"\n"</span>;
<span class="number">  1038    </span>  File testAll(<span class="str">"../test.txt"</span>);
<span class="number">  1039    </span>  testAll.open(File::in);
<span class="number">  1040    </span>  <span class="key">if</span> (testAll.isGood())
<span class="number">  1041  </span><span class="minmax" onclick="toggleminmax(this, 'sp1040')" onmouseover="highlight('sp1040')" onmouseout="removeHighlight('sp1040')">-</span>  <span id="sp1040">{
<span class="number">  1042    </span>    std::string all = testAll.readAll();
<span class="number">  1043    </span>    std::cout &lt&lt all &lt&lt <span class="str">"\n"</span>;
<span class="number">  1044    </span>  }</span>
<span class="number">  1045    </span>  testAll.close();
<span class="number">  1046    </span>
<span class="number">  1047    </span>  title(<span class="str">"testing File::readAll(true)"</span>, <span class="str">'-'</span>);
<span class="number">  1048    </span>  std::cout &lt&lt <span class="str">"\n"</span>;
<span class="number">  1049    </span>  File testAllTrue(<span class="str">"../test.txt"</span>);
<span class="number">  1050    </span>  testAllTrue.open(File::in);
<span class="number">  1051    </span>  <span class="key">if</span> (testAllTrue.isGood())
<span class="number">  1052  </span><span class="minmax" onclick="toggleminmax(this, 'sp1051')" onmouseover="highlight('sp1051')" onmouseout="removeHighlight('sp1051')">-</span>  <span id="sp1051">{
<span class="number">  1053    </span>    std::string all = testAllTrue.readAll(<span class="key">true</span>);
<span class="number">  1054    </span>    std::cout &lt&lt all &lt&lt <span class="str">"\n"</span>;
<span class="number">  1055    </span>  }</span>
<span class="number">  1056    </span>  testAllTrue.close();
<span class="number">  1057    </span>
<span class="number">  1058    </span>  <span class="comment">// read text file and write to another text file</span>
<span class="number">  1059    </span>
<span class="number">  1060    </span>  title(<span class="str">"writing to c:/temp/test.txt"</span>, <span class="str">'-'</span>);
<span class="number">  1061    </span>  File in(<span class="str">"../FileSystemDemo/FileSystem.h"</span>);
<span class="number">  1062    </span>  in.open(File::in);
<span class="number">  1063    </span>  File out(<span class="str">"c:/temp/test.txt"</span>);
<span class="number">  1064    </span>  out.open(File::out);
<span class="number">  1065    </span>  <span class="key">while</span>(in.isGood())
<span class="number">  1066  </span><span class="minmax" onclick="toggleminmax(this, 'sp1065')" onmouseover="highlight('sp1065')" onmouseout="removeHighlight('sp1065')">-</span>  <span id="sp1065">{
<span class="number">  1067    </span>    std::string temp = in.getLine();
<span class="number">  1068    </span>    std::cout &lt&lt <span class="str">"\n  "</span> &lt&lt temp.c_str();
<span class="number">  1069    </span>    out.putLine(temp);
<span class="number">  1070    </span>    out.putLine(<span class="str">"\n"</span>);
<span class="number">  1071    </span>  }</span>
<span class="number">  1072    </span>  std::cout &lt&lt <span class="str">"\n\n"</span>;
<span class="number">  1073    </span>}</span>
<span class="number">  1074    </span><span class="directive">#endif</span>
<span class="number">  1075    </span>

</pre>
  </body>
</html>